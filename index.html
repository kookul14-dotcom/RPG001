<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>RPG Hex Strategy - Final Fixed v2</title>
    <style>
        :root { --hex-size: 34px; --hex-width: calc(var(--hex-size) * 2); --hex-height: calc(var(--hex-size) * 1.732); --bg-color: #121212; }
        body { background: var(--bg-color); color: #eee; font-family: 'Pretendard', sans-serif; display: flex; flex-direction: column; align-items: center; margin: 0; overflow-x: hidden; min-height: 100vh; user-select: none; }
        
        /* UI ê³µí†µ */
        .screen { display: none; width: 100%; max-width: 1200px; flex-direction: column; align-items: center; padding: 20px; box-sizing: border-box; animation: fadeIn 0.3s; }
        .screen.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .btn { padding: 8px 16px; background: #333; color: white; border: 1px solid #555; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.2s; font-size: 14px; }
        .btn:hover { background: #444; border-color: #777; }
        .btn:disabled { opacity: 0.3; cursor: not-allowed; filter: grayscale(1); }
        .btn-primary { background: #2980b9; border-color: #3498db; }
        .btn-danger { background: #c0392b; border-color: #e74c3c; }
        .btn-success { background: #27ae60; border-color: #2ecc71; }
        .btn-warning { background: #f39c12; border-color: #f1c40f; color: #222; }
        .btn-back { position: absolute; top: 20px; left: 20px; z-index: 1000; }
        .btn-reset { position: absolute; top: 20px; right: 20px; z-index: 1000; font-size: 10px; padding: 5px; background: #000; border: 1px solid #555; color: #777; }

        .header-bar { width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: #1a1a1a; border-bottom: 2px solid #333; margin-bottom: 20px; border-radius: 8px; }
        .currency { font-size: 16px; font-weight: bold; color: #f1c40f; display: flex; gap: 15px; }

        /* ë¡œë¹„ */
        .lobby-menu { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; width: 100%; max-width: 600px; margin-top: 50px; }
        .menu-card { background: #252525; border: 2px solid #444; border-radius: 12px; height: 150px; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; transition: 0.3s; }
        .menu-card:hover { transform: translateY(-5px); border-color: #3498db; box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3); }
        .menu-icon { font-size: 40px; margin-bottom: 10px; }
        .menu-title { font-size: 18px; font-weight: bold; }

        /* ì „ì¥ */
        .chapter-list { display: flex; flex-direction: column; gap: 10px; width: 100%; max-width: 600px; }
        .chapter-item { background: #222; padding: 15px; border-radius: 8px; border: 1px solid #333; cursor: pointer; display: flex; justify-content: space-between; transition: 0.2s; }
        .stage-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 10px; padding: 10px; background: #151515; border-radius: 8px; display: none; }
        .stage-btn { padding: 12px; background: #2c3e50; text-align: center; border-radius: 4px; cursor: pointer; font-size: 14px; border: 1px solid #34495e; color: #ccc; position: relative; }
        .stage-btn.locked { background: #111; color: #444; pointer-events: none; }
        .stage-btn.locked::after { content: 'ğŸ”’'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); opacity: 0.5; }
        .stage-btn.cleared { background: #27ae60; color: #fff; border-color: #2ecc71; }

        /* ì „íˆ¬ í™”ë©´ */
        .battle-container { position: relative; width: 960px; display: flex; flex-direction: column; gap: 10px; }
        .top-bar { display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background: #1e1e1e; border-radius: 8px; }
        .battle-layout { display: flex; gap: 10px; }
        .bench-area { width: 140px; height: 540px; background: #1e1e1e; border: 2px solid #333; border-radius: 10px; overflow-y: auto; padding: 5px; display: flex; flex-direction: column; gap: 5px; }
        .bench-unit { background: #2a2a2a; padding: 5px; border-radius: 6px; border: 1px solid #444; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 2px; position: relative; }
        .bench-unit.selected { border-color: #f1c40f; background: #333; }
        .bench-unit.deployed { opacity: 0.4; filter: grayscale(1); pointer-events: none; }
        .bench-unit.dead { opacity: 0.5 !important; border-color: #555 !important; background: #222 !important; pointer-events: none; filter: grayscale(100%) !important; }
        .bench-unit.dead::after { content: 'DEAD'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-15deg); color: #e74c3c; font-weight: 900; border: 2px solid #e74c3c; padding: 2px; font-size: 10px; z-index: 5; }

        .grid-container { position: relative; width: 960px; height: 540px; border: 3px solid #222; background: #0a0a0a; border-radius: 10px; overflow: hidden; }
        .grid-container.shake { animation: shake 0.3s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-3px, 0, 0); } 20%, 80% { transform: translate3d(5px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-7px, 0, 0); } 40%, 60% { transform: translate3d(7px, 0, 0); } }

        .hex { position: absolute; width: var(--hex-width); height: var(--hex-height); background: #151515; clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); border: 1px solid #333; z-index: 1; transition: 0.2s; }
        .hex.valid-target { background: rgba(52, 152, 219, 0.2); border-color: #3498db; cursor: pointer; }
        
        .unit-obj { position: absolute; width: 44px; height: 44px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 22px; z-index: 10; cursor: help; transition: left 0.2s ease-out, top 0.2s ease-out; border: 3px solid transparent; background-clip: padding-box; }
        .unit-obj.dead { filter: grayscale(100%) brightness(50%) !important; z-index: 1 !important; border-color: #555 !important; background: #222 !important; box-shadow: none !important; opacity: 0.6 !important; } 
        
        .unit-name-tag { position: absolute; bottom: -36px; width: 80px; text-align: center; font-size: 10px; color: #ccc; text-shadow: 1px 1px 1px #000; pointer-events: none; white-space: nowrap; z-index: 20; }
        
        .bars { position: absolute; bottom: -18px; width: 44px; display: flex; flex-direction: column; gap: 2px; pointer-events: none; z-index: 20; }
        .bar-bg { width: 100%; height: 6px; background: #000; border-radius: 2px; position: relative; overflow: visible; border: 1px solid #222; }
        .hp-damage-buffer { height: 100%; background: #fff; width: 100%; position: absolute; top: 0; left: 0; z-index: 1; transition: width 0.5s ease-out 0.2s; } 
        .hp-fill { height: 100%; background: #e74c3c; width: 100%; position: absolute; top: 0; left: 0; z-index: 2; transition: width 0.1s linear; } 
        .shield-fill { height: 100%; background: #00b4d8; opacity: 0.9; width: 0%; position: absolute; top: 0; left: 0; z-index: 3; transition: width 0.2s linear; box-shadow: 0 0 2px #fff; }
        
        .skill-bar-bg { width: 100%; height: 3px; background: #111; border-radius: 1px; position: relative; overflow: hidden; margin-top: 1px; }
        .skill-fill { height: 100%; background: #f1c40f; width: 0%; transition: width 0.1s linear; }

        .status-row { position: absolute; top: -18px; width: 100px; display: flex; justify-content: center; gap: 2px; pointer-events: none; z-index: 30; flex-wrap: wrap; }
        .st-icon { width: 14px; height: 14px; border-radius: 3px; font-size: 10px; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.8); border: 1px solid #fff; animation: popIn 0.2s; }
        .st-buff { border-color: #2ecc71; color: #2ecc71; }
        .st-debuff { border-color: #e74c3c; color: #e74c3c; }
        .st-cc { border-color: #f1c40f; color: #f1c40f; }

        .fx-layer { position: absolute; width: 100%; height: 100%; pointer-events: none; z-index: 50; }
        
        .projectile { position: absolute; z-index: 60; filter: drop-shadow(0 0 5px rgba(255,255,255,0.8)); }
        .proj-arrow { width: 45px; height: 2px; background: linear-gradient(to right, transparent 20%, #f1c40f 100%); }
        .proj-arrow::after { content: ''; position: absolute; right: -2px; top: -3px; width: 0; height: 0; border-left: 8px solid #f1c40f; border-top: 4px solid transparent; border-bottom: 4px solid transparent; }
        
        .proj-magic, .proj-fire, .proj-ice, .proj-poison, .proj-dark, .proj-life, .proj-tech { border-radius: 50%; width: 12px; height: 12px; }
        .proj-magic::after, .proj-fire::after { content: none; }
        .proj-fire { background: radial-gradient(circle, #ffeb3b, #ff5722); box-shadow: 0 0 10px #ff5722; }
        .proj-ice { background: radial-gradient(circle, #fff, #00e5ff); box-shadow: 0 0 8px #00bcd4; }
        .proj-poison { background: radial-gradient(circle, #ccff90, #64dd17); box-shadow: 0 0 8px #76ff03; }
        .proj-dark { background: #000; border: 1px solid #9c27b0; box-shadow: 0 0 10px #9c27b0; }
        .proj-life { width: 14px; height: 14px; background: radial-gradient(circle, #fff 20%, #ffca28 60%, #e91e63 100%); box-shadow: 0 0 10px #ffca28, 0 0 15px #e91e63; }
        .proj-tech { width: 12px; height: 12px; background: radial-gradient(circle, #fff 10%, #00e5ff 100%); border: 1px solid #fff; box-shadow: 0 0 5px #00bcd4; }

        .fx-slash { position: absolute; width: 80px; height: 80px; background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, transparent 60%); clip-path: polygon(0% 0%, 100% 0%, 100% 20%, 0% 100%); transform-origin: center; animation: slash 0.15s linear forwards; z-index: 60; }
        @keyframes slash { 0% { transform: scale(0.5) rotate(-45deg); opacity: 0; } 50% { opacity: 1; } 100% { transform: scale(1.5) rotate(45deg); opacity: 0; } }

        .fx-explosion { position: absolute; width: 80px; height: 80px; border-radius: 50%; background: radial-gradient(circle, #ffeb3b, #ff5722, transparent 70%); animation: explode 0.4s ease-out forwards; z-index: 65; mix-blend-mode: screen; }
        @keyframes explode { 0%{transform:scale(0);opacity:1} 100%{transform:scale(2);opacity:0} }
        
        .fx-ice-nova { position: absolute; width: 80px; height: 80px; border-radius: 50%; border: 4px solid #00e5ff; box-shadow: inset 0 0 20px #00bcd4; animation: ice-expand 0.5s ease-out forwards; z-index: 65; opacity: 0.8; }
        @keyframes ice-expand { 0%{transform:scale(0);opacity:1;border-width:10px} 100%{transform:scale(2.5);opacity:0;border-width:0px} }
        
        .fx-poison-cloud { position: absolute; width: 60px; height: 60px; border-radius: 50%; background: radial-gradient(circle, #76ff03, transparent 70%); animation: cloud-rise 0.8s ease-out forwards; z-index: 65; opacity: 0.6; }
        @keyframes cloud-rise { 0%{transform:scale(0.5);opacity:0.8} 100%{transform:scale(1.5) translateY(-30px);opacity:0} }
        
        .fx-buff { position: absolute; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #2ecc71; animation: buff-rise 0.6s ease-out forwards; z-index: 55; }
        @keyframes buff-rise { 0%{transform:scale(0.8);opacity:1} 100%{transform:scale(1.2) translateY(-40px);opacity:0} }

        .dmg-text { position: absolute; font-weight: 900; pointer-events: none; z-index: 100; font-size: 16px; text-shadow: 1px 1px 2px #000; animation: float-text 0.8s ease-out forwards; white-space: nowrap; }
        .dmg-normal { color: #ffffff; } .dmg-skill { color: #f1c40f; font-size: 22px; text-shadow: 0 0 5px #e67e22; }
        .crit { color: #e67e22 !important; font-size: 26px; animation: crit-pop 0.6s ease-out forwards !important; }
        .heal-text { color: #2ecc71; }
        @keyframes float-text { 0% { opacity:0; transform:translateY(0) scale(1); } 20% { opacity:1; transform:translateY(-10px) scale(1.2); } 100% { opacity:0; transform:translateY(-40px) scale(1); } }
        @keyframes crit-pop { 0% { transform:scale(0.5); } 40% { transform:scale(1.5); } 100% { opacity:0; transform:scale(1) translateY(-50px); } }
        
        .speech-bubble { position: absolute; top: -50px; left: 50%; transform: translateX(-50%); background: #fff; color: #000; padding: 5px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; white-space: nowrap; border: 2px solid #333; z-index: 200; animation: bubble-pop 1.5s ease-out forwards; box-shadow: 0 5px 10px rgba(0,0,0,0.5); }
        .speech-bubble::after { content: ''; position: absolute; bottom: -6px; left: 50%; margin-left: -6px; border-width: 6px 6px 0; border-style: solid; border-color: #333 transparent; display: block; width: 0; }
        @keyframes bubble-pop { 0% { opacity:0; transform:translateX(-50%) translateY(10px); } 15% { opacity:1; transform:translateX(-50%) translateY(0); } 80% { opacity:1; } 100% { opacity:0; transform:translateX(-50%) translateY(-20px); } }

        /* íŒì—… ë“± - [ìˆ˜ì •ë¨: ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ ì¶”ê°€] */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 4000; align-items: center; justify-content: center; }
        .modal-overlay.active { display: flex; }

        .party-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 3000; flex-direction: column; align-items: center; justify-content: center; padding: 20px; box-sizing: border-box; }
        .party-modal.active { display: flex; }
        .party-content { background: #1a1a1a; padding: 20px; border-radius: 12px; border: 1px solid #444; width: 95%; max-width: 1100px; display: flex; flex-direction: column; align-items: center; }
        .party-slots { display: flex; gap: 15px; margin-bottom: 20px; background: #222; padding: 20px; border-radius: 12px; border: 2px solid #444; width: 100%; justify-content: center; }
        .party-slot { width: 100px; height: 140px; background: #111; border: 2px dashed #555; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; position: relative; }
        .party-slot.filled { border-style: solid; border-color: #f1c40f; background: #2a2a2a; }
        .remove-btn { position: absolute; top: -5px; right: -5px; background: #c0392b; color: white; width: 20px; height: 20px; border-radius: 50%; font-size: 14px; display: flex; align-items: center; justify-content: center; z-index: 5; }
        .roster-container { display: flex; gap: 10px; width: 100%; height: 400px; overflow-x: auto; padding-bottom: 10px; }
        .job-column { flex: 1; min-width: 180px; background: #151515; border: 1px solid #333; border-radius: 8px; display: flex; flex-direction: column; }
        .job-header { padding: 10px; background: #2c3e50; text-align: center; font-weight: bold; border-radius: 8px 8px 0 0; border-bottom: 1px solid #444; color: #fff; font-size: 13px; }
        .job-list { flex: 1; overflow-y: auto; padding: 5px; display: flex; flex-direction: column; gap: 5px; }
        .roster-card { background: #252525; border: 1px solid #444; border-radius: 6px; padding: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px; position: relative; }
        .roster-card.selected { opacity: 0.4; filter: grayscale(1); pointer-events: none; border-color: #555; }
        .roster-card.dead { border-color: #555 !important; background: #222 !important; opacity: 0.5 !important; filter: grayscale(100%) !important; }
        
        .inventory-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 10px; width: 100%; max-width: 1000px; }
        .inv-card { background: #222; border: 2px solid #444; border-radius: 8px; padding: 10px; display: flex; flex-direction: column; align-items: center; cursor: pointer; position: relative; transition: 0.2s; }
        .inv-card.dead { filter: grayscale(100%) !important; border-color: #555 !important; opacity: 0.5 !important; }
        .dead-badge { position: absolute; top: 5px; right: 5px; background: #555; color: white; font-size: 10px; padding: 2px 4px; border-radius: 3px; font-weight: bold; }

        .result-modal { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #1a1a1a; padding: 30px; border: 2px solid #f1c40f; border-radius: 15px; text-align: center; z-index: 5000; box-shadow: 0 0 50px rgba(0,0,0,0.8); display: none; flex-direction: column; gap: 20px; width: 300px; }
        .detail-card { background: #1e1e1e; width: 400px; padding: 20px; border-radius: 12px; border: 2px solid #555; display: flex; flex-direction: column; gap: 15px; }

        .grade-legendary { border-color: #f1c40f !important; color: #f1c40f; } .grade-epic { border-color: #9b59b6 !important; color: #9b59b6; } .grade-rare { border-color: #3498db !important; color: #3498db; } .grade-normal { border-color: #2ecc71 !important; color: #2ecc71; } .grade-apprentice { border-color: #95a5a6 !important; color: #95a5a6; }
        .team-a { box-shadow: 0 0 10px 4px rgba(52, 152, 219, 0.5); background: rgba(52, 152, 219, 0.1); }
        .team-b { box-shadow: 0 0 10px 4px rgba(231, 76, 60, 0.5); background: rgba(231, 76, 60, 0.1); }
        .gacha-card { width: 90px; height: 120px; background: #252525; border: 2px solid #555; border-radius: 6px; display: flex; flex-direction: column; align-items: center; justify-content: center; animation: popIn 0.5s; }
        @keyframes popIn { 0%{transform:scale(0)} 70%{transform:scale(1.1)} 100%{transform:scale(1)} }

        .panel-container { display: flex; width: 960px; gap: 10px; align-items: flex-start; height: 180px; margin-top: 10px; }
        .ranking-col { width: 50%; background: #1e1e1e; border: 1px solid #333; border-radius: 8px; padding: 10px; height: 100%; overflow-y: auto; }
        .rank-row { display: flex; align-items: center; margin-bottom: 4px; background: #222; padding: 4px 6px; border-radius: 3px; font-size: 11px; }
        .rank-bar-bg { flex: 1; height: 8px; background: #111; display: flex; margin: 0 10px; border-radius: 2px; }
        .rb-d { background: #e74c3c; height: 100%; transition: width 0.3s; } .rb-h { background: #2ecc71; height: 100%; transition: width 0.3s; }
/* [ì¶”ê°€] ëŒíŒŒ ê°€ëŠ¥ ì¹´ë“œ ì´í™íŠ¸ */
.inv-card.can-awaken {
    animation: synth-pulse 1.5s infinite;
    border: 2px solid #f1c40f !important;
}
.inv-card.can-awaken::before {
    content: 'â–²'; position: absolute; top: -8px; left: -8px; width: 20px; height: 20px;
    background: #f1c40f; color: #000; border-radius: 50%; display: flex; align-items: center; 
    justify-content: center; font-weight: bold; font-size: 12px; border: 2px solid #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.5); z-index: 20; animation: bounce 1.5s infinite;
}
@keyframes synth-pulse {
    0% { box-shadow: 0 0 0 0 rgba(241, 196, 15, 0.7); }
    70% { box-shadow: 0 0 10px 5px rgba(241, 196, 15, 0); }
    100% { box-shadow: 0 0 0 0 rgba(241, 196, 15, 0); }
}
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }

/* [ì¶”ê°€] ëŒíŒŒ ì„±ê³µ ë²ˆì©ì„ ì´í™íŠ¸ */
.upgrade-flash {
    animation: flash-white 0.5s ease-out;
}
@keyframes flash-white {
    0% { filter: brightness(5); transform: scale(1.1); }
    100% { filter: brightness(1); transform: scale(1); }
}

/* ëŠ¥ë ¥ì¹˜ ìƒìŠ¹ í…ìŠ¤íŠ¸ */
.stat-up { color: #2ecc71; font-weight: bold; margin-left: 5px; }    </style>
</head>
<body>

    <button class="btn btn-reset" onclick="resetGame()">ì´ˆê¸°í™” (Reset)</button>

    <div class="modal-overlay" id="detail-modal" onclick="closeModal(event)">
        <div class="detail-card">
            <div class="detail-header">
                <div class="detail-icon" id="d-icon"></div>
                <div><div style="font-size:20px; font-weight:bold;"><span id="d-name"></span> <span id="d-awaken" style="color:#f1c40f"></span></div><div style="font-size:12px; color:#aaa;" id="d-job-grade"></div></div>
            </div>
            <div style="background:#222; padding:10px; border-radius:8px; display:flex; justify-content:space-between; align-items:center;">
                <div style="font-size:12px;">ìƒíƒœ: <span id="d-status">ì •ìƒ</span></div>
                <button id="btn-heal" class="btn btn-success" style="font-size:11px;" onclick="healUnit()">ì¹˜ë£Œ (ğŸ’?)</button>
            </div>
            <div class="detail-stats" id="d-stats"></div>
            <div class="detail-skills" id="d-skills" style="background:#252525; padding:10px; border-radius:8px; font-size:13px; line-height:1.6; color:#ccc;"></div>
            <button class="btn btn-primary" id="btn-synth" onclick="doSynthesis()">ëŒíŒŒ (ë™ì¼ ì¹´ë“œ 3ì¥ ì†Œëª¨)</button>
            <button class="btn btn-danger" onclick="document.getElementById('detail-modal').classList.remove('active')">ë‹«ê¸°</button>
        </div>
    </div>

    <div class="party-modal" id="party-modal">
        <div class="party-content">
            <div style="font-size:24px; font-weight:bold; margin-bottom:10px; color:#f1c40f;">âš”ï¸ ìš©ë³‘ë‹¨ êµ¬ì„±</div>
            <div style="color:#aaa; font-size:12px; margin-bottom:10px;">ì „íˆ¬ì— ì°¸ì—¬í•  ìµœì •ì˜ˆ 5ëª…ì„ ì„ íƒí•˜ì„¸ìš”. (ì‚¬ë§í•œ ìš©ë³‘ì€ ë°°ì¹˜ ë¶ˆê°€)</div>
            <div class="party-slots" id="party-slots"></div>
            <div class="roster-container" id="roster-container"></div>
            <div style="margin-top:20px; display:flex; gap:10px;">
                <button class="btn btn-primary" onclick="confirmParty()">êµ¬ì„± ì™„ë£Œ</button>
                <button class="btn btn-danger" onclick="closePartyModal()">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <div id="screen-lobby" class="screen active">
        <div class="header-bar"><div>ğŸ° RPG LOBBY</div><div class="currency"><span id="lobby-gem">ğŸ’ 0</span></div></div>
        <div class="lobby-menu">
            <div class="menu-card" onclick="goToScreen('campaign')"><div class="menu-icon">âš”ï¸</div><div class="menu-title">ì „ì¥ (Campaign)</div></div>
            <div class="menu-card" onclick="goToScreen('gacha')"><div class="menu-icon">ğŸ”®</div><div class="menu-title">ìš©ë³‘ ëª¨ì§‘ (Gacha)</div></div>
            <div class="menu-card" onclick="goToScreen('inventory')"><div class="menu-icon">ğŸ›¡ï¸</div><div class="menu-title">ë‚´ ìš©ë³‘ (My Mercs)</div></div>
            <div class="menu-card" onclick="goToScreen('library')"><div class="menu-icon">ğŸ“š</div><div class="menu-title">ë¼ì´ë¸ŒëŸ¬ë¦¬ (Library)</div></div>
        </div>
    </div>

    <div id="screen-campaign" class="screen"><button class="btn btn-back" onclick="goToScreen('lobby')">â—€ ë¡œë¹„ë¡œ</button><h2>âš”ï¸ ì „ì¥ ì„ íƒ</h2><div class="chapter-list" id="chapter-list"></div></div>

    <div id="screen-battle" class="screen">
        <div class="battle-container">
            <div class="top-bar">
                <button class="btn btn-danger" onclick="quitBattle()">â—€ í¬ê¸° (ì²´ë ¥ ì €ì¥ë¨)</button>
                <div id="battle-title" style="font-weight:bold; font-size:18px;">Battle</div>
                <div style="display:flex; gap:10px;">
                    <button class="btn btn-warning" id="btn-party" onclick="openPartyModal()">âš™ï¸ ìš©ë³‘ë‹¨</button>
                    <button class="btn btn-success" id="btn-auto-deploy" onclick="autoDeploy()">âš¡ ìë™ë°°ì¹˜</button>
                    <button class="btn btn-primary" id="btn-start-battle" onclick="startBattleEngine()" disabled>ì „íˆ¬ ê°œì‹œ</button>
                </div>
            </div>
            <div class="battle-layout">
                <div class="bench-area" id="bench-list"></div>
                <div class="grid-container" id="grid-container">
                    <div class="fx-layer" id="fx-layer"></div>
                    <div class="result-modal" id="win-modal">
                        <div class="result-title">VICTORY!</div>
                        <div class="reward-box" id="win-reward"></div>
                        <button class="btn btn-success" onclick="nextStage()">ë‹¤ìŒ ìŠ¤í…Œì´ì§€ â–¶</button>
                        <button class="btn btn-primary" onclick="quitBattle()">ë¡œë¹„ë¡œ</button>
                    </div>
                </div>
            </div>
            <div class="panel-container">
                <div class="ranking-col" style="border-right:2px solid #333;"><div style="text-align:center;font-weight:bold;margin-bottom:5px;color:#e74c3c">âš”ï¸ ë°ë¯¸ì§€ ë­í‚¹</div><div id="rank-dmg"></div></div>
                <div class="ranking-col"><div style="text-align:center;font-weight:bold;margin-bottom:5px;color:#2ecc71">ğŸ›¡ï¸ ì§€ì› ë­í‚¹</div><div id="rank-supp"></div></div>
            </div>
        </div>
    </div>

    <div id="screen-inventory" class="screen"><button class="btn btn-back" onclick="goToScreen('lobby')">â—€ ë¡œë¹„ë¡œ</button><div class="header-bar"><div>ğŸ›¡ï¸ ë‚´ ìš©ë³‘</div><div class="currency"><span id="inv-gem"></span></div></div><div class="inventory-grid" id="inventory-grid"></div></div>
    <div id="screen-gacha" class="screen"><button class="btn btn-back" onclick="goToScreen('lobby')">â—€ ë¡œë¹„ë¡œ</button><div class="header-bar" style="justify-content:center;background:none;border:none;"><div class="currency"><span id="gacha-gem"></span></div></div><div class="gacha-box" style="margin-top:0;text-align:center;"><h2>ğŸ”® ìš©ë³‘ ëª¨ì§‘</h2><div style="margin:20px;"><button class="btn btn-primary" onclick="pullGacha(1)">1íšŒ ì†Œí™˜ (ğŸ’100)</button><button class="btn btn-primary" onclick="pullGacha(10)">10íšŒ ì†Œí™˜ (ğŸ’1000)</button></div><div class="gacha-results" id="gacha-results" style="display:flex;flex-wrap:wrap;justify-content:center;gap:10px;"></div></div></div>
    <div id="screen-library" class="screen"><button class="btn btn-back" onclick="goToScreen('lobby')">â—€ ë¡œë¹„ë¡œ</button><h2>ğŸ“š ë„ê°</h2><div class="inventory-grid" id="lib-grid"></div></div>

<script>
    // --- Data Definition ---
    // [ìˆ˜ì •ë¨: ì£¼ì„ ì²˜ë¦¬] ë¬¸ë²• ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ í…ìŠ¤íŠ¸ë¥¼ ì£¼ì„ì²˜ë¦¬í•¨. ì—¬ê¸°ì— ë°ì´í„°ë¥¼ ì±„ì›Œ ë„£ìœ¼ì„¸ìš”.
    const rawHeroData = [

        
{ name: "ì•„ë¥´ì¹´ë””ì•„", grade: "legendary", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 102, def: 82, hp: 1320, spd: 98, range: 10, mspd: 0.9, skillName: "ë‚™ë¢°", cd: 11.25, proj: "lightning", s1: { type: 1, target: 0, side: 10, val: 200, param: 0, dur: 0 }, s2: { type: 51, target: 10, side: 0, val: 0, param: 0, dur: 2 } },
{ name: "ë°œë‘ë¥´", grade: "legendary", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 115, def: 75, hp: 1400, spd: 102, range: 1, mspd: 1.1, skillName: "íŒŒë©¸ì˜ ë§ì¹˜", cd: 11.25, proj: null, s1: { type: 1, target: 0, side: 1, val: 400, param: 0, dur: 0 }, s2: { type: 42, target: 1, side: 0, val: 0, param: -1.3, dur: 2 } },
{ name: "ë¼ê·¸ë‚˜", grade: "epic", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 88, def: 62, hp: 1080, spd: 112, range: 1, mspd: 1.05, skillName: "ë¶„ë…¸ì˜ ì¼ê²©", cd: 9.5, proj: null, s1: { type: 1, target: 0, side: 1, val: 350, param: 0, dur: 0 }, s2: { type: 45, target: 1, side: 2, val: 0, param: 1.3, dur: 3 } },
{ name: "ì„¸ë Œí‹°ì•„", grade: "epic", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 72, def: 78, hp: 1200, spd: 128, range: 10, mspd: 0.8, skillName: "ì¹˜ìœ ì˜ ë¹›", cd: 9.5, proj: "life", s1: { type: 2, target: 1, side: 10, val: 150, param: 0, dur: 0 }, s2: { type: 6, target: 10, side: 1, val: 0, param: 0, dur: 0 } },
{ name: "ì¹´ì¼ëŸ°", grade: "epic", job: "ì•”ì‚´ì", icon: "ğŸ—¡ï¸", atk: 92, def: 58, hp: 850, spd: 135, range: 1, mspd: 1.2, skillName: "ê·¸ë¦¼ì ë² ê¸°", cd: 9.5, proj: null, s1: { type: 1, target: 0, side: 22, val: 0, param: 0, dur: 0 }, s2: { type: 46, target: 1, side: 2, val: 0, param: 0.5, dur: 2 } },
{ name: "ë°œë ˆë¡ ", grade: "epic", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 85, def: 70, hp: 1150, spd: 110, range: 1, mspd: 1.05, skillName: "ìš©ê¸°ì˜ í¬íš¨", cd: 9.5, proj: null, s1: { type: 41, target: 1, side: 10, val: 0, param: 0, dur: 3 }, s2: { type: 72, target: 1, side: 2, val: 0, param: 0, dur: 2 } },
{ name: "ì´ìŠ¤ì¹´", grade: "epic", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 95, def: 55, hp: 980, spd: 140, range: 10, mspd: 1.1, skillName: "ì•½ì ê³µê²©", cd: 9.5, proj: "arrow", s1: { type: 1, target: 0, side: 1, val: 100, param: 0, dur: 0 }, s2: { type: 45, target: 1, side: 2, val: 0, param: 0.5, dur: 0 } },
{ name: "í•˜ì´ë¸ë¦°", grade: "epic", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 80, def: 82, hp: 1250, spd: 100, range: 7, mspd: 0.9, skillName: "ì²œìƒì˜ ë³´í˜¸ë§‰", cd: 9.5, proj: "tech", s1: { type: 3, target: 1, side: 10, val: 100, param: 0, dur: 3 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë“œë ˆì´í¬", grade: "rare", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 70, def: 50, hp: 850, spd: 115, range: 10, mspd: 1.1, skillName: "í™”ì—¼íƒ„", cd: 10, proj: "arrow", s1: { type: 1, target: 0, side: 1, val: 150, param: 0, dur: 0 }, s2: { type: 52, target: 1, side: 0, val: 5, param: 0, dur: 4 } },
{ name: "ì—˜ë¦¬ì‚¬", grade: "rare", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 60, def: 65, hp: 900, spd: 100, range: 5, mspd: 0.85, skillName: "ë¹›ì˜ ê°€í˜¸", cd: 8.75, proj: "tech", s1: { type: 3, target: 1, side: 31, val: 100, param: 0, dur: 3 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¡œê°„", grade: "rare", job: "ìê°", icon: "âš”ï¸", atk: 75, def: 45, hp: 820, spd: 125, range: 1, mspd: 1.2, skillName: "ê¸‰ìŠµ", cd: 8.75, proj: null, s1: { type: 71, target: 0, side: 31, val: 100, param: 0, dur: 0 }, s2: { type: 43, target: 1, side: 2, val: 0, param: 1.3, dur: 3 } },
{ name: "ë¯¸ë¼ë²¨", grade: "rare", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 55, def: 70, hp: 950, spd: 95, range: 8, mspd: 0.85, skillName: "ì •í™”ì˜ ë°”ëŒ", cd: 8.75, proj: "tech", s1: { type: 6, target: 1, side: 71, val: 0, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "í•˜ë¥´íŠ¸", grade: "rare", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 80, def: 40, hp: 780, spd: 130, range: 10, mspd: 1.1, skillName: "ì—°ì† ì‚¬ê²©", cd: 8.75, proj: "arrow", s1: { type: 73, target: 0, side: 1, val: 80, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì œë¼ìŠ¤", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 78, def: 48, hp: 860, spd: 120, range: 1, mspd: 1.05, skillName: "ì•”í‘ì°½", cd: 8.75, proj: null, s1: { type: 1, target: 0, side: 1, val: 200, param: 0, dur: 0 }, s2: { type: 51, target: 1, side: 0, val: 0, param: 0, dur: 1.5 } },
{ name: "ì¹´ë°€ë¼", grade: "rare", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 62, def: 60, hp: 910, spd: 105, range: 8, mspd: 0.8, skillName: "ìƒëª…ì˜ ìˆ¨ê²°", cd: 8.75, proj: "life", s1: { type: 2, target: 1, side: 31, val: 62, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¸Œë€íŠ¸", grade: "rare", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 82, def: 42, hp: 800, spd: 128, range: 9, mspd: 0.95, skillName: "ìœ ì„±", cd: 10, proj: "fire", s1: { type: 1, target: 0, side: 10, val: 100, param: 0, dur: 0 }, s2: { type: 52, target: 10, side: 0, val: 5, param: 0, dur: 4 } },
{ name: "ë¦¬ì˜¤ë„¬", grade: "rare", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 68, def: 55, hp: 890, spd: 110, range: 9, mspd: 0.95, skillName: "ëˆˆë³´ë¼", cd: 8.75, proj: "ice", s1: { type: 1, target: 0, side: 10, val: 100, param: 0, dur: 2.5 }, s2: { type: 43, target: 10, side: 0, val: 0, param: -1.3, dur: 3 } },
{ name: "ì„¸ë¼í”¼ë‚˜", grade: "rare", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 58, def: 72, hp: 960, spd: 98, range: 8, mspd: 0.85, skillName: "ë¹›ì˜ ê°€í˜¸", cd: 8.75, proj: "tech", s1: { type: 3, target: 1, side: 31, val: 100, param: 0, dur: 3 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "íƒ€ì´ë¡ ", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 77, def: 47, hp: 840, spd: 122, range: 1, mspd: 1.05, skillName: "íšŒì „ë² ê¸°", cd: 8.75, proj: null, s1: { type: 1, target: 0, side: 10, val: 100, param: 0, dur: 0 }, s2: { type: 72, target: 10, side: 0, val: 0, param: 0, dur: 3 } },
{ name: "ì—ë‹¨", grade: "rare", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 73, def: 52, hp: 870, spd: 118, range: 10, mspd: 1.1, skillName: "ì§‘ì¤‘ ì‚¬ê²©", cd: 8.75, proj: "arrow", s1: { type: 1, target: 0, side: 1, val: 150, param: 0, dur: 0 }, s2: { type: 42, target: 1, side: 0, val: 0, param: -1.3, dur: 4 } },
{ name: "ìœ ë¦¬ì•„", grade: "rare", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 65, def: 63, hp: 920, spd: 104, range: 8, mspd: 0.8, skillName: "ì¹˜ìœ ì˜ ë¬¼ê²°", cd: 8.75, proj: "life", s1: { type: 2, target: 1, side: 10, val: 65, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ê°€ë¡ ", grade: "rare", job: "ê¸°ìˆ ì", icon: "âš”ï¸", atk: 85, def: 38, hp: 760, spd: 135, range: 1, mspd: 1, skillName: "ë…ì•ˆê°œ", cd: 9.75, proj: null, s1: { type: 1, target: 0, side: 10, val: 80, param: 0, dur: 0 }, s2: { type: 53, target: 10, side: 0, val: 1, param: 0, dur: 5 } },
{ name: "ë‹ˆì½œë¼ìŠ¤", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 69, def: 58, hp: 900, spd: 108, range: 1, mspd: 1.05, skillName: "ë°©íŒ¨ ëŒì§„", cd: 8.75, proj: null, s1: { type: 1, target: 0, side: 1, val: 100, param: 0, dur: 0 }, s2: { type: 51, target: 1, side: 0, val: 0, param: 0, dur: 1.5 } },
{ name: "í…Œì˜¤", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 55, def: 40, hp: 700, spd: 110, range: 1, mspd: 1, skillName: "ê°•íƒ€", cd: 7.5, proj: null, s1: { type: 1, target: 0, side: 1, val: 75, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¦¬ì•ˆ", grade: "normal", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 50, def: 45, hp: 720, spd: 105, range: 10, mspd: 1.1, skillName: "ë‚ ì¹´ë¡œìš´ì‚¬ê²©", cd: 7.5, proj: "arrow", s1: { type: 45, target: 2, side: 1, val: 0, param: 1.2, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¸Œë¦­", grade: "normal", job: "ìê°", icon: "âš”ï¸", atk: 55, def: 35, hp: 680, spd: 120, range: 1, mspd: 1.15, skillName: "ì°Œë¥´ê¸°", cd: 7.5, proj: null, s1: { type: 1, target: 0, side: 31, val: 55, param: 0, dur: 0 }, s2: { type: 42, target: 1, side: 0, val: 0, param: -1.3, dur: 3 } },
{ name: "ì‚¬ë¼", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 45, def: 50, hp: 750, spd: 100, range: 1, mspd: 1, skillName: "ìˆ˜í˜¸ì˜ ë°©ë²½", cd: 8.75, proj: null, s1: { type: 42, target: 2, side: 1, val: 50, param: 0, dur: 2 }, s2: { type: 72, target: 62, side: 0, val: 0, param: 0, dur: 3 } },
{ name: "ì œì¸", grade: "normal", job: "ê¸°ìˆ ì", icon: "âš”ï¸", atk: 58, def: 38, hp: 690, spd: 115, range: 6, mspd: 1, skillName: "ë…ì•½ë³‘íˆ¬ì²™", cd: 8.5, proj: "poison", s1: { type: 1, target: 0, side: 10, val: 40, param: 0, dur: 0 }, s2: { type: 53, target: 10, side: 0, val: 1, param: 0, dur: 3 } },
{ name: "ì¹´ì´", grade: "normal", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 52, def: 42, hp: 710, spd: 108, range: 10, mspd: 1.1, skillName: "ì†ì‚¬", cd: 7.5, proj: "arrow", s1: { type: 73, target: 0, side: 1, val: 52, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¯¸ì˜¤", grade: "normal", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 48, def: 47, hp: 740, spd: 102, range: 10, mspd: 1.1, skillName: "ë‚ ì¹´ë¡œìš´ì‚¬ê²©", cd: 7.5, proj: "arrow", s1: { type: 45, target: 2, side: 1, val: 0, param: 1.2, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¡œì›¬", grade: "normal", job: "ìê°", icon: "âš”ï¸", atk: 57, def: 39, hp: 700, spd: 118, range: 1, mspd: 1.15, skillName: "ê¸°ìŠµ", cd: 7.25, proj: null, s1: { type: 71, target: 0, side: 31, val: 0, param: 1.5, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì—ì¼ë¦°", grade: "normal", job: "ì•”ì‚´ì", icon: "ğŸ—¡ï¸", atk: 60, def: 49, hp: 650, spd: 98, range: 1, mspd: 1.1, skillName: "ì•”ì‚´", cd: 7.5, proj: null, s1: { type: 1, target: 0, side: 62, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "íƒ€ë ˆìŠ¤", grade: "normal", job: "ìê°", icon: "âš”ï¸", atk: 59, def: 36, hp: 680, spd: 122, range: 1, mspd: 1.15, skillName: "ê¸°ìŠµ", cd: 7.25, proj: null, s1: { type: 71, target: 0, side: 31, val: 0, param: 1.5, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ìœ ë‚˜", grade: "normal", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 51, def: 44, hp: 720, spd: 109, range: 7, mspd: 0.85, skillName: "ì •í™”", cd: 7.5, proj: "tech", s1: { type: 6, target: 1, side: 71, val: 0, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë°”ë¥´ë…¸", grade: "normal", job: "ìê°", icon: "âš”ï¸", atk: 63, def: 33, hp: 670, spd: 125, range: 1, mspd: 1.15, skillName: "ê¸°ìŠµ", cd: 7.25, proj: null, s1: { type: 71, target: 0, side: 31, val: 0, param: 1.5, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì„¸ë¼", grade: "normal", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 47, def: 48, hp: 750, spd: 101, range: 10, mspd: 1.1, skillName: "ë‚ ì¹´ë¡œìš´ì‚¬ê²©", cd: 7.5, proj: "arrow", s1: { type: 45, target: 2, side: 1, val: 0, param: 1.2, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¼ì¼ë¼", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 54, def: 41, hp: 705, spd: 113, range: 1, mspd: 1, skillName: "ë°”ëŒ ë² ê¸°", cd: 7.5, proj: null, s1: { type: 43, target: 2, side: 1, val: 0, param: 1.3, dur: 2.5 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì œë“œ", grade: "normal", job: "ê¸°ìˆ ì", icon: "âš”ï¸", atk: 56, def: 37, hp: 690, spd: 117, range: 5, mspd: 1, skillName: "ë…ì•½ë³‘íˆ¬ì²™", cd: 8.5, proj: "poison", s1: { type: 1, target: 0, side: 10, val: 40, param: 0, dur: 0 }, s2: { type: 53, target: 10, side: 0, val: 1, param: 0, dur: 3 } },
{ name: "ì¹´ë Œ", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 49, def: 46, hp: 735, spd: 103, range: 1, mspd: 1, skillName: "ìˆ˜í˜¸ì˜ ë°©ë²½", cd: 8.75, proj: null, s1: { type: 42, target: 2, side: 1, val: 50, param: 0, dur: 2 }, s2: { type: 72, target: 51, side: 0, val: 0, param: 0, dur: 3 } },
{ name: "ë¡œí‚¤", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 61, def: 34, hp: 675, spd: 126, range: 1, mspd: 1, skillName: "ì—°ì† íƒ€ê²©", cd: 7.5, proj: null, s1: { type: 73, target: 0, side: 1, val: 61, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë§ˆë¦¬ì•ˆ", grade: "normal", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 44, def: 51, hp: 760, spd: 97, range: 7, mspd: 0.8, skillName: "ì¹˜ìœ ì˜ ì†ê¸¸", cd: 7.5, proj: "life", s1: { type: 2, target: 1, side: 31, val: 44, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "íƒ€ë¡ ", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 53, def: 43, hp: 715, spd: 111, range: 1, mspd: 1, skillName: "ëŒí’", cd: 7.5, proj: null, s1: { type: 1, target: 0, side: 10, val: 53, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì—ë°€ë¦¬", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 48, def: 47, hp: 740, spd: 102, range: 1, mspd: 1, skillName: "ìˆ˜í˜¸ì˜ ë°©ë²½", cd: 8.75, proj: null, s1: { type: 42, target: 2, side: 1, val: 50, param: 0, dur: 2 }, s2: { type: 72, target: 99, side: 0, val: 0, param: 0, dur: 3 } },
{ name: "ì œí”„ë¦°", grade: "normal", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 57, def: 39, hp: 700, spd: 116, range: 8, mspd: 0.9, skillName: "í™”ì—¼êµ¬", cd: 8.75, proj: "fire", s1: { type: 1, target: 0, side: 99, val: 80, param: 0, dur: 0 }, s2: { type: 52, target: 99, side: 0, val: 5, param: 0, dur: 3 } },
{ name: "ë‚˜ë”˜", grade: "normal", job: "ê¸°ìˆ ì", icon: "âš”ï¸", atk: 52, def: 42, hp: 720, spd: 108, range: 1, mspd: 1, skillName: "í™”ì—¼ë³‘íˆ¬ì²™", cd: 8.75, proj: null, s1: { type: 1, target: 0, side: 10, val: 40, param: 0, dur: 0 }, s2: { type: 52, target: 1, side: 0, val: 5, param: 0, dur: 3 } },
{ name: "ì¹¼ë¦­", grade: "normal", job: "ìê°", icon: "âš”ï¸", atk: 51, def: 37, hp: 390, spd: 130, range: 1, mspd: 1.15, skillName: "ì°Œë¥´ê¸°", cd: 7.5, proj: null, s1: { type: 1, target: 0, side: 31, val: 51, param: 0, dur: 0 }, s2: { type: 42, target: 1, side: 0, val: 0, param: -1.3, dur: 3 } },
{ name: "ì˜¤í•„ë¦¬ì•„", grade: "normal", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 45, def: 50, hp: 750, spd: 100, range: 7, mspd: 0.8, skillName: "ì¹˜ìœ ì˜ ì†ê¸¸", cd: 7.5, proj: "life", s1: { type: 2, target: 1, side: 31, val: 45, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë ˆì˜¤ë¦­", grade: "normal", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 58, def: 38, hp: 690, spd: 115, range: 8, mspd: 0.9, skillName: "í™”ì—¼êµ¬", cd: 8.75, proj: "fire", s1: { type: 1, target: 0, side: 99, val: 80, param: 0, dur: 0 }, s2: { type: 52, target: 99, side: 0, val: 5, param: 0, dur: 3 } },
{ name: "ë§ˆì•¼", grade: "normal", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 47, def: 48, hp: 740, spd: 103, range: 8, mspd: 0.9, skillName: "ì–¼ìŒì°½", cd: 7.5, proj: "ice", s1: { type: 1, target: 0, side: 1, val: 80, param: 0, dur: 0 }, s2: { type: 43, target: 1, side: 0, val: 0, param: -1.3, dur: 3 } },
{ name: "ì œì´í¬", grade: "normal", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 55, def: 40, hp: 700, spd: 110, range: 10, mspd: 1.1, skillName: "ì†ì‚¬", cd: 7.5, proj: "arrow", s1: { type: 73, target: 0, side: 1, val: 55, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë‹ˆì•„", grade: "normal", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 49, def: 46, hp: 735, spd: 104, range: 8, mspd: 0.9, skillName: "ì–¼ìŒì°½", cd: 7.5, proj: "ice", s1: { type: 1, target: 0, side: 1, val: 80, param: 0, dur: 0 }, s2: { type: 43, target: 1, side: 0, val: 0, param: -1.3, dur: 3 } },
{ name: "ë¸Œë£¨í¬", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 62, def: 34, hp: 675, spd: 127, range: 1, mspd: 1, skillName: "ì—°ì† íƒ€ê²©", cd: 7.5, proj: null, s1: { type: 73, target: 0, side: 1, val: 62, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì„¸ë¼í•€", grade: "normal", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 46, def: 49, hp: 760, spd: 99, range: 8, mspd: 0.8, skillName: "ì¹˜ìœ ì˜ ì†ê¸¸", cd: 7.5, proj: "life", s1: { type: 2, target: 1, side: 31, val: 46, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì¹´ì¼", grade: "normal", job: "ê¸°ìˆ ì", icon: "âš”ï¸", atk: 54, def: 41, hp: 705, spd: 114, range: 1, mspd: 1, skillName: "í™”ì—¼ë³‘íˆ¬ì²™", cd: 8.75, proj: null, s1: { type: 1, target: 2, side: 1, val: 40, param: 0, dur: 2.5 }, s2: { type: 52, target: 0, side: 0, val: 5, param: 0, dur: 3 } },
{ name: "ë¦¬ì‚¬", grade: "normal", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 50, def: 45, hp: 720, spd: 107, range: 8, mspd: 0.8, skillName: "ì¹˜ìœ ì˜ ì†ê¸¸", cd: 7.5, proj: "life", s1: { type: 2, target: 1, side: 31, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë£¨í¬", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 35, def: 25, hp: 500, spd: 100, range: 1, mspd: 0.95, skillName: "ê°•íƒ€", cd: 6.75, proj: null, s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë§ˆë¦¬", grade: "apprentice", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 30, def: 30, hp: 520, spd: 95, range: 7, mspd: 0.85, skillName: "ë¶ˆê½ƒí™”ì‚´", cd: 8.25, proj: "fire", s1: { type: 1, target: 1, side: 1, val: 30, param: 0, dur: 0 }, s2: { type: 52, target: 1, side: 0, val: 5, param: 0, dur: 3 } },
{ name: "ë¡œë¹ˆ", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 36, def: 24, hp: 495, spd: 102, range: 1, mspd: 0.95, skillName: "ê°•íƒ€", cd: 6.75, proj: null, s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë‹ˆì½œ", grade: "apprentice", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 31, def: 29, hp: 525, spd: 97, range: 7, mspd: 0.85, skillName: "ì–¼ìŒí™”ì‚´", cd: 6.75, proj: "ice", s1: { type: 1, target: 1, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 43, target: 1, side: 0, val: 0, param: -1.3, dur: 2.5 } },
{ name: "ë¸Œëœ", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 38, def: 22, hp: 485, spd: 108, range: 1, mspd: 0.95, skillName: "ëŒì§„", cd: 6.75, proj: null, s1: { type: 42, target: 2, side: 1, val: 0, param: 1.2, dur: 2.5 }, s2: { type: 40, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¦¬ì•„", grade: "apprentice", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 29, def: 31, hp: 535, spd: 92, range: 1, mspd: 0.8, skillName: "ë³´í˜¸ë§‰", cd: 6.75, proj: null, s1: { type: 3, target: 1, side: 21, val: 50, param: 0, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì¹´ì´ë Œ", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 34, def: 26, hp: 505, spd: 104, range: 1, mspd: 0.95, skillName: "ê°•íƒ€", cd: 6.75, proj: null, s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "íƒ€ë ˆì˜¨", grade: "apprentice", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 40, def: 20, hp: 480, spd: 110, range: 9, mspd: 1, skillName: "í—¤ë“œìƒ·", cd: 6.75, proj: "arrow", s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì—ë°€ë¦¬ì•„", grade: "apprentice", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 28, def: 32, hp: 530, spd: 90, range: 1, mspd: 0.8, skillName: "ë³´í˜¸ë§‰", cd: 6.75, proj: null, s1: { type: 3, target: 1, side: 21, val: 50, param: 0, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì œí”„", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 33, def: 27, hp: 510, spd: 105, range: 1, mspd: 0.95, skillName: "ë„ë°œ", cd: 6.75, proj: null, s1: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 }, s2: { type: 72, target: 61, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì„¸ë¦¬ì•„", grade: "apprentice", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 32, def: 28, hp: 515, spd: 99, range: 7, mspd: 0.85, skillName: "ì–¼ìŒí™”ì‚´", cd: 6.75, proj: "ice", s1: { type: 1, target: 1, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 43, target: 1, side: 0, val: 0, param: -1.3, dur: 2.5 } },
{ name: "ë ˆì˜¨", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 37, def: 23, hp: 490, spd: 109, range: 1, mspd: 0.95, skillName: "ëŒì§„", cd: 6.75, proj: null, s1: { type: 42, target: 2, side: 1, val: 0, param: 1.2, dur: 2.5 }, s2: { type: 40, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¯¸ë‚˜", grade: "apprentice", job: "ìê°", icon: "âš”ï¸", atk: 30, def: 30, hp: 520, spd: 96, range: 1, mspd: 1.05, skillName: "ê¸°ìŠµ", cd: 7.25, proj: null, s1: { type: 71, target: 0, side: 31, val: 0, param: 1.3, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì œì´ìŠ¤", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 39, def: 21, hp: 480, spd: 112, range: 1, mspd: 0.95, skillName: "ê°•íƒ€", cd: 6.75, proj: null, s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ìœ ë¦¬", grade: "apprentice", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 28, def: 33, hp: 540, spd: 91, range: 5, mspd: 0.85, skillName: "ì •í™”", cd: 7.5, proj: "tech", s1: { type: 6, target: 1, side: 71, val: 0, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "í•˜ì§„", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 35, def: 25, hp: 500, spd: 103, range: 1, mspd: 0.95, skillName: "ê°•íƒ€", cd: 6.75, proj: null, s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì†Œë¼", grade: "apprentice", job: "ìê°", icon: "âš”ï¸", atk: 31, def: 29, hp: 525, spd: 98, range: 1, mspd: 1.05, skillName: "ì¶œí˜ˆ", cd: 6.75, proj: null, s1: { type: 1, target: 0, side: 31, val: 5, param: 0, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¸Œë£¨ìŠ¤", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 38, def: 22, hp: 485, spd: 110, range: 1, mspd: 0.95, skillName: "ëŒê²©", cd: 6.75, proj: null, s1: { type: 42, target: 0, side: 1, val: 0, param: 0, dur: 2.5 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¼ë‚˜", grade: "apprentice", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 29, def: 31, hp: 535, spd: 93, range: 5, mspd: 0.85, skillName: "ì •í™”", cd: 7.5, proj: "tech", s1: { type: 6, target: 1, side: 71, val: 0, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì¼€ì´ë¸Œ", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 34, def: 26, hp: 505, spd: 106, range: 1, mspd: 0.95, skillName: "ê°•íƒ€", cd: 6.75, proj: null, s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì•„ë¦°", grade: "apprentice", job: "ìê°", icon: "âš”ï¸", atk: 33, def: 27, hp: 510, spd: 101, range: 1, mspd: 1.05, skillName: "ì¶œí˜ˆ", cd: 6.75, proj: null, s1: { type: 1, target: 0, side: 31, val: 5, param: 0, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "í† ë¹„", grade: "apprentice", job: "ì „ì‚¬", icon: "ğŸ›¡ï¸", atk: 36, def: 24, hp: 495, spd: 107, range: 1, mspd: 0.95, skillName: "ëŒì§„", cd: 6.75, proj: null, s1: { type: 42, target: 2, side: 1, val: 0, param: 1.2, dur: 2.5 }, s2: { type: 40, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¯¸ë¼", grade: "apprentice", job: "ê¸°ìˆ ì", icon: "âš”ï¸", atk: 30, def: 30, hp: 520, spd: 95, range: 2, mspd: 0.95, skillName: "ë°©íŒ¨ íŒŒì‡„", cd: 6.75, proj: null, s1: { type: 42, target: 0, side: 21, val: 0, param: 0, dur: 2.5 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì œìŠ¤", grade: "apprentice", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 39, def: 21, hp: 480, spd: 113, range: 9, mspd: 1, skillName: "í—¤ë“œìƒ·", cd: 6.75, proj: "arrow", s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë‚˜ë‚˜", grade: "apprentice", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 28, def: 33, hp: 540, spd: 90, range: 5, mspd: 0.75, skillName: "ì‘ê¸‰ì²˜ì¹˜", cd: 6.75, proj: "life", s1: { type: 2, target: 1, side: 31, val: 75, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë£¨ì´ìŠ¤", grade: "apprentice", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 35, def: 25, hp: 500, spd: 104, range: 9, mspd: 1, skillName: "í—¤ë“œìƒ·", cd: 6.75, proj: "arrow", s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "í•˜ë‚˜", grade: "apprentice", job: "ê¸°ìˆ ì", icon: "âš”ï¸", atk: 31, def: 29, hp: 525, spd: 97, range: 5, mspd: 0.95, skillName: "ë°©íŒ¨ íŒŒì‡„", cd: 6.75, proj: "bullet", s1: { type: 42, target: 0, side: 21, val: 0, param: 0, dur: 2.5 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¸ŒëœíŠ¸", grade: "apprentice", job: "ìê°", icon: "âš”ï¸", atk: 38, def: 22, hp: 485, spd: 111, range: 1, mspd: 1.05, skillName: "ê¸°ìŠµ", cd: 7.25, proj: null, s1: { type: 71, target: 0, side: 31, val: 0, param: 1.3, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¦¬ì¦ˆ", grade: "apprentice", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 29, def: 31, hp: 535, spd: 94, range: 5, mspd: 0.75, skillName: "ì‘ê¸‰ì²˜ì¹˜", cd: 6.75, proj: "life", s1: { type: 2, target: 1, side: 31, val: 75, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì¼€ì´", grade: "apprentice", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 34, def: 26, hp: 505, spd: 105, range: 9, mspd: 1, skillName: "í—¤ë“œìƒ·", cd: 6.75, proj: "arrow", s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ìœ ë¯¸", grade: "apprentice", job: "ê¸°ìˆ ì", icon: "âš”ï¸", atk: 32, def: 28, hp: 515, spd: 100, range: 6, mspd: 0.95, skillName: "ë°©íŒ¨ íŒŒì‡„", cd: 6.75, proj: "bullet", s1: { type: 42, target: 0, side: 21, val: 0, param: 0, dur: 2.5 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¡œê±´", grade: "apprentice", job: "ìê°", icon: "âš”ï¸", atk: 37, def: 23, hp: 490, spd: 108, range: 1, mspd: 1.05, skillName: "ê¸°ìŠµ", cd: 7.25, proj: null, s1: { type: 71, target: 0, side: 31, val: 0, param: 1.3, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¯¸ì¹´", grade: "apprentice", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 30, def: 30, hp: 520, spd: 96, range: 5, mspd: 0.75, skillName: "ì‘ê¸‰ì²˜ì¹˜", cd: 6.75, proj: "life", s1: { type: 2, target: 1, side: 31, val: 75, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì œì´ë“ ", grade: "apprentice", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 39, def: 21, hp: 480, spd: 114, range: 9, mspd: 1, skillName: "í—¤ë“œìƒ·", cd: 6.75, proj: "arrow", s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¼ì´ë¼", grade: "apprentice", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 28, def: 33, hp: 540, spd: 92, range: 1, mspd: 0.8, skillName: "ë³´í˜¸ë§‰", cd: 6.75, proj: null, s1: { type: 3, target: 1, side: 21, val: 50, param: 0, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì¹´í„°", grade: "apprentice", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 35, def: 25, hp: 500, spd: 103, range: 9, mspd: 1, skillName: "í—¤ë“œìƒ·", cd: 6.75, proj: "arrow", s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ìœ ë¼", grade: "apprentice", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 31, def: 29, hp: 525, spd: 98, range: 1, mspd: 0.75, skillName: "ì‘ê¸‰ì²˜ì¹˜", cd: 6.75, proj: null, s1: { type: 2, target: 1, side: 31, val: 75, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¸Œë£¨ë…¸", grade: "apprentice", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 38, def: 22, hp: 485, spd: 109, range: 7, mspd: 0.85, skillName: "ë¶ˆê½ƒí™”ì‚´", cd: 8.25, proj: "fire", s1: { type: 1, target: 0, side: 1, val: 38, param: 0, dur: 0 }, s2: { type: 52, target: 1, side: 0, val: 5, param: 0, dur: 3 } },
{ name: "ì„¸ë¦°", grade: "apprentice", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 29, def: 31, hp: 535, spd: 93, range: 1, mspd: 0.8, skillName: "ë³´í˜¸ë§‰", cd: 6.75, proj: null, s1: { type: 3, target: 1, side: 21, val: 50, param: 0, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì¼€ë¹ˆ", grade: "apprentice", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 34, def: 26, hp: 505, spd: 106, range: 9, mspd: 1, skillName: "í—¤ë“œìƒ·", cd: 6.75, proj: "arrow", s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì•„ë¯¸", grade: "apprentice", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 33, def: 27, hp: 510, spd: 102, range: 1, mspd: 0.75, skillName: "ì‘ê¸‰ì²˜ì¹˜", cd: 6.75, proj: null, s1: { type: 2, target: 1, side: 31, val: 75, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "í† ë§ˆìŠ¤", grade: "apprentice", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 36, def: 24, hp: 495, spd: 107, range: 7, mspd: 0.85, skillName: "ì „ê²©í™”ì‚´", cd: 6.75, proj: "lightning", s1: { type: 1, target: 0, side: 1, val: 55, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¯¸ë ˆ", grade: "apprentice", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 30, def: 30, hp: 520, spd: 95, range: 5, mspd: 0.75, skillName: "ì‘ê¸‰ì²˜ì¹˜", cd: 6.75, proj: "lightning", s1: { type: 2, target: 1, side: 31, val: 75, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ì œë¡œ", grade: "apprentice", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 39, def: 21, hp: 480, spd: 113, range: 9, mspd: 1, skillName: "í—¤ë“œìƒ·", cd: 6.75, proj: "lightning", s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë‚˜ë¦¬", grade: "apprentice", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 28, def: 33, hp: 540, spd: 91, range: 1, mspd: 0.8, skillName: "ë³´í˜¸ë§‰", cd: 6.75, proj: "lightning", s1: { type: 3, target: 1, side: 21, val: 50, param: 0, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë£¨ì¹´", grade: "apprentice", job: "ì‚¬ìˆ˜", icon: "ğŸ¹", atk: 35, def: 25, hp: 500, spd: 104, range: 9, mspd: 1, skillName: "í—¤ë“œìƒ·", cd: 6.75, proj: "lightning", s1: { type: 1, target: 0, side: 1, val: 50, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "í•˜ë‚˜ë¦¬", grade: "apprentice", job: "ì¹˜ìœ ì‚¬", icon: "âš•ï¸", atk: 31, def: 29, hp: 525, spd: 97, range: 1, mspd: 0.75, skillName: "ì‘ê¸‰ì²˜ì¹˜", cd: 6.75, proj: "lightning", s1: { type: 2, target: 1, side: 31, val: 75, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¸Œë½", grade: "apprentice", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”®", atk: 38, def: 22, hp: 485, spd: 110, range: 7, mspd: 0.85, skillName: "ì „ê²©í™”ì‚´", cd: 6.75, proj: "lightning", s1: { type: 1, target: 0, side: 1, val: 55, param: 0, dur: 0 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } },
{ name: "ë¦¬ì˜¨", grade: "apprentice", job: "ì§€ì›ê°€", icon: "ğŸ’ ", atk: 29, def: 31, hp: 535, spd: 94, range: 1, mspd: 0.8, skillName: "ë³´í˜¸ë§‰", cd: 6.75, proj: null, s1: { type: 3, target: 1, side: 21, val: 50, param: 0, dur: 2 }, s2: { type: 0, target: 0, side: 0, val: 0, param: 0, dur: 0 } }

        

    ];
    
    const monsterData = [
{ name: "ìŠ¬ë¼ì„", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ’§", hp: 150, atk: 15, def: 5, spd: 70, range: 1, mspd: 0.7, skillName: "ëª¸í†µë°•ì¹˜ê¸°", cd: 5, proj: "poison", s1: { type: 1, target: 1, side: 0, val: 120, dur: 0 }, s2: null },
{ name: "ì¥", grade: "normal", job: "ì•”ì‚´ì", icon: "ğŸ€", hp: 100, atk: 25, def: 0, spd: 110, range: 1, mspd: 1.2, skillName: "ê°‰ì•„ë¨¹ê¸°", cd: 4, proj: null, s1: { type: 1, target: 1, side: 0, val: 130, dur: 0 }, s2: null },
{ name: "ë°•ì¥", grade: "normal", job: "ì•”ì‚´ì", icon: "ğŸ¦‡", hp: 120, atk: 20, def: 2, spd: 120, range: 1, mspd: 1.5, skillName: "í¡í˜ˆ", cd: 4, proj: null, s1: { type: 2, target: 2, side: 2, val: 40, dur: 0 }, s2: null },
{ name: "ê±°ë¯¸", grade: "normal", job: "ê¸°ìˆ ì", icon: "ğŸ•·ï¸", hp: 180, atk: 20, def: 5, spd: 80, range: 1, mspd: 1.1, skillName: "ê±°ë¯¸ì¤„", cd: 6, proj: null, s1: { type: 43, target: 1, side: 0, val: 0.5, dur: 2 }, s2: null },
{ name: "ë±€", grade: "normal", job: "ì•”ì‚´ì", icon: "ğŸ", hp: 160, atk: 30, def: 5, spd: 90, range: 1, mspd: 1, skillName: "ë…ë‹ˆ", cd: 5, proj: null, s1: { type: 53, target: 1, side: 0, val: 30, dur: 3 }, s2: null },
{ name: "ë©§ë¼ì§€", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ—", hp: 250, atk: 25, def: 10, spd: 60, range: 1, mspd: 1.1, skillName: "ëŒì§„", cd: 6, proj: null, s1: { type: 1, target: 1, side: 0, val: 150, dur: 0 }, s2: null },
{ name: "ëŠ‘ëŒ€", grade: "normal", job: "ì•”ì‚´ì", icon: "ğŸº", hp: 180, atk: 35, def: 5, spd: 105, range: 1, mspd: 1.2, skillName: "ë¬¼ì–´ëœ¯ê¸°", cd: 4, proj: null, s1: { type: 1, target: 1, side: 0, val: 140, dur: 0 }, s2: null },
{ name: "ë„ì ", grade: "normal", job: "ì‚¬ìˆ˜", icon: "ğŸ‘º", hp: 140, atk: 30, def: 5, spd: 95, range: 3, mspd: 1, skillName: "ë‹¨ê²€íˆ¬ì²™", cd: 5, proj: "arrow", s1: { type: 1, target: 1, side: 0, val: 130, dur: 0 }, s2: null },
{ name: "ë²„ì„¯ëŒì´", grade: "normal", job: "ì¹˜ìœ ì‚¬", icon: "ğŸ„", hp: 200, atk: 10, def: 5, spd: 50, range: 1, mspd: 0.9, skillName: "í¬ìíšŒë³µ", cd: 7, proj: null, s1: { type: 2, target: 10, side: 1, val: 50, dur: 0 }, s2: null },
{ name: "ëŒê²Œ", grade: "normal", job: "ì „ì‚¬", icon: "ğŸ¦€", hp: 300, atk: 20, def: 30, spd: 40, range: 1, mspd: 0.8, skillName: "ê»ì§ˆìˆ¨ê¸°", cd: 8, proj: null, s1: { type: 3, target: 2, side: 2, val: 100, dur: 0 }, s2: null },
{ name: "ê³ ë¸”ë¦°", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ‘¹", hp: 280, atk: 35, def: 15, spd: 90, range: 1, mspd: 1.1, skillName: "ì°½ì°Œë¥´ê¸°", cd: 5, proj: null, s1: { type: 1, target: 1, side: 0, val: 150, dur: 0 }, s2: null },
{ name: "ìŠ¤ì¼ˆë ˆí†¤", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ’€", hp: 350, atk: 40, def: 20, spd: 60, range: 1, mspd: 0.8, skillName: "ë°©íŒ¨ê°€ê²©", cd: 8, proj: null, s1: { type: 51, target: 1, side: 0, val: 0, dur: 2 }, s2: null },
{ name: "ì¢€ë¹„", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ§Ÿ", hp: 500, atk: 20, def: 5, spd: 30, range: 1, mspd: 0.7, skillName: "ê°ì—¼", cd: 6, proj: "poison", s1: { type: 53, target: 1, side: 0, val: 40, dur: 4 }, s2: null },
{ name: "ì˜¤í¬", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ·", hp: 450, atk: 50, def: 15, spd: 50, range: 1, mspd: 1, skillName: "ë‚´ë ¤ì°ê¸°", cd: 7, proj: null, s1: { type: 1, target: 1, side: 0, val: 180, dur: 0 }, s2: null },
{ name: "í•˜í”¼", grade: "rare", job: "ì‚¬ìˆ˜", icon: "ğŸ¦…", hp: 220, atk: 45, def: 5, spd: 110, range: 3, mspd: 1.5, skillName: "ê¹ƒí„¸ë‚ ë¦¬ê¸°", cd: 5, proj: "arrow", s1: { type: 1, target: 10, side: 0, val: 80, dur: 0 }, s2: null },
{ name: "ë¯¸ë¼", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ¤•", hp: 400, atk: 30, def: 25, spd: 40, range: 1, mspd: 0.8, skillName: "ì €ì£¼", cd: 8, proj: "dark", s1: { type: 41, target: 1, side: 0, val: 0.5, dur: 3 }, s2: null },
{ name: "ë¦¬ìë“œë§¨", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ¦", hp: 380, atk: 40, def: 20, spd: 85, range: 1, mspd: 1, skillName: "ê¼¬ë¦¬ì¹˜ê¸°", cd: 5, proj: null, s1: { type: 51, target: 1, side: 0, val: 0, dur: 1 }, s2: null },
{ name: "ê³¨ë ˜", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ—¿", hp: 800, atk: 30, def: 50, spd: 20, range: 1, mspd: 0.7, skillName: "ë„ë°œ", cd: 10, proj: null, s1: { type: 72, target: 2, side: 2, val: 0, dur: 3 }, s2: null },
{ name: "ìœ ë ¹", grade: "rare", job: "ë§ˆë²•ì‚¬", icon: "ğŸ‘»", hp: 200, atk: 50, def: 0, spd: 90, range: 3, mspd: 1, skillName: "ê³µí¬", cd: 8, proj: "dark", s1: { type: 41, target: 1, side: 0, val: 0.7, dur: 3 }, s2: null },
{ name: "ê³°", grade: "rare", job: "ì „ì‚¬", icon: "ğŸ»", hp: 600, atk: 60, def: 20, spd: 45, range: 1, mspd: 1, skillName: "ì•ë°œí›„ë¦¬ê¸°", cd: 6, proj: null, s1: { type: 51, target: 1, side: 0, val: 0, dur: 2 }, s2: null },
{ name: "í‘ë§ˆë²•ì‚¬", grade: "epic", job: "ë§ˆë²•ì‚¬", icon: "ğŸ§™â€â™€ï¸", hp: 300, atk: 70, def: 10, spd: 75, range: 3, mspd: 1, skillName: "ì–´ë‘ ì˜êµ¬ì²´", cd: 7, proj: "dark", s1: { type: 53, target: 10, side: 0, val: 50, dur: 3 }, s2: null },
{ name: "ì˜¤ìš°ê±°", grade: "epic", job: "ì „ì‚¬", icon: "ğŸ‘¹", hp: 1000, atk: 80, def: 40, spd: 35, range: 1, mspd: 1, skillName: "ì§€ì§„", cd: 10, proj: null, s1: { type: 51, target: 10, side: 0, val: 0, dur: 2 }, s2: null },
{ name: "ë‹¤í¬ì—˜í”„", grade: "epic", job: "ì•”ì‚´ì", icon: "ğŸ§", hp: 350, atk: 90, def: 15, spd: 130, range: 1, mspd: 1.2, skillName: "ì•”ì‚´", cd: 5, proj: null, s1: { type: 1, target: 1, side: 0, val: 250, dur: 0 }, s2: null },
{ name: "ì„œíë²„ìŠ¤", grade: "epic", job: "ë§ˆë²•ì‚¬", icon: "ğŸ˜ˆ", hp: 400, atk: 60, def: 20, spd: 90, range: 3, mspd: 1.1, skillName: "í˜„í˜¹", cd: 8, proj: "life", s1: { type: 51, target: 1, side: 0, val: 0, dur: 3 }, s2: null },
{ name: "íŠ¸ë¡¤", grade: "epic", job: "ì „ì‚¬", icon: "ğŸ§Ÿâ€â™‚ï¸", hp: 1200, atk: 50, def: 20, spd: 40, range: 1, mspd: 0.9, skillName: "ì¬ìƒ", cd: 6, proj: null, s1: { type: 2, target: 2, side: 2, val: 300, dur: 0 }, s2: null },
{ name: "ì •ë ¹(ë¶ˆ)", grade: "epic", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”¥", hp: 350, atk: 85, def: 10, spd: 80, range: 3, mspd: 1, skillName: "ë¶ˆê¸°ë‘¥", cd: 7, proj: "fire", s1: { type: 52, target: 10, side: 0, val: 60, dur: 3 }, s2: null },
{ name: "ì •ë ¹(ë¬¼)", grade: "epic", job: "ì¹˜ìœ ì‚¬", icon: "ğŸ’§", hp: 400, atk: 30, def: 30, spd: 70, range: 3, mspd: 1, skillName: "ìƒëª…ì˜ë¹„", cd: 8, proj: "water", s1: { type: 2, target: 10, side: 1, val: 150, dur: 0 }, s2: null },
{ name: "ì²œì‚¬ë³‘ì¥", grade: "legendary", job: "ì „ì‚¬", icon: "ğŸ‘¼", hp: 15000, atk: 200, def: 80, spd: 80, range: 1, mspd: 1, skillName: "ì‹¬íŒ", cd: 8, proj: null, s1: { type: 1, target: 1, side: 0, val: 250, dur: 0 }, s2: null },
{ name: "í‚¹ìŠ¬ë¼ì„", grade: "legendary", job: "ì „ì‚¬", icon: "ğŸ‘‘", hp: 3000, atk: 100, def: 30, spd: 60, range: 1, mspd: 0.7, skillName: "ê¹”ì•„ë­‰ê°œê¸°", cd: 8, proj: null, s1: { type: 1, target: 10, side: 0, val: 150, dur: 0 }, s2: null },
{ name: "ë°”ì‹¤ë¦¬ìŠ¤í¬", grade: "legendary", job: "ì•”ì‚´ì", icon: "ğŸ", hp: 4500, atk: 120, def: 40, spd: 85, range: 1, mspd: 1, skillName: "ì„í™”ë…", cd: 6, proj: null, s1: { type: 51, target: 1, side: 0, val: 0, dur: 3 }, s2: null },
{ name: "ì›¨ì–´ìš¸í”„", grade: "legendary", job: "ì „ì‚¬", icon: "ğŸº", hp: 6000, atk: 150, def: 50, spd: 120, range: 1, mspd: 1, skillName: "ê´‘ë€", cd: 5, proj: null, s1: { type: 43, target: 2, side: 2, val: 2, dur: 5 }, s2: null },
{ name: "ë°ìŠ¤ë‚˜ì´íŠ¸", grade: "legendary", job: "ì „ì‚¬", icon: "ğŸ’€", hp: 8000, atk: 180, def: 100, spd: 50, range: 1, mspd: 1.2, skillName: "ì£½ìŒì˜ê³ ë¦¬", cd: 7, proj: null, s1: { type: 3, target: 2, side: 2, val: 1000, dur: 0 }, s2: null },
{ name: "ê°•ì² ê³¨ë ˜", grade: "legendary", job: "ì „ì‚¬", icon: "ğŸ¤–", hp: 12000, atk: 150, def: 200, spd: 30, range: 1, mspd: 1, skillName: "ë¡œì¼“í€ì¹˜", cd: 9, proj: "tech", s1: { type: 51, target: 10, side: 0, val: 0, dur: 3 }, s2: null },
{ name: "ì´í”„ë¦¬íŠ¸", grade: "legendary", job: "ë§ˆë²•ì‚¬", icon: "ğŸ”¥", hp: 15000, atk: 250, def: 50, spd: 70, range: 3, mspd: 1, skillName: "í—¬íŒŒì´ì–´", cd: 8, proj: "fire", s1: { type: 52, target: 10, side: 0, val: 100, dur: 5 }, s2: null },
{ name: "ê³ ëŒ€ì—”íŠ¸", grade: "legendary", job: "ì „ì‚¬", icon: "ğŸŒ³", hp: 20000, atk: 180, def: 80, spd: 40, range: 1, mspd: 0.7, skillName: "ìì—°ì˜ë¶„ë…¸", cd: 10, proj: null, s1: { type: 51, target: 10, side: 0, val: 0, dur: 3 }, s2: null },
{ name: "ë“œë˜ê³¤", grade: "legendary", job: "ë§ˆë²•ì‚¬", icon: "ğŸ²", hp: 30000, atk: 400, def: 150, spd: 80, range: 3, mspd: 0.8, skillName: "í™”ì—¼ë¸Œë ˆìŠ¤", cd: 12, proj: "fire", s1: { type: 52, target: 10, side: 0, val: 80, dur: 4 }, s2: null },
{ name: "ë¦¬ì¹˜ì™•", grade: "legendary", job: "ë§ˆë²•ì‚¬", icon: "ğŸ’€", hp: 45000, atk: 500, def: 100, spd: 60, range: 3, mspd: 1, skillName: "ì£½ìŒì˜ì†ê¸¸", cd: 10, proj: "dark", s1: { type: 1, target: 1, side: 0, val: 300, dur: 0 }, s2: null },
{ name: "ë§ˆì™•", grade: "legendary", job: "ì „ì‚¬", icon: "ğŸ‘¿", hp: 80000, atk: 700, def: 300, spd: 50, range: 1, mspd: 1, skillName: "íŒŒë©¸ì˜ì¼ê²©", cd: 15, proj: "dark", s1: { type: 1, target: 10, side: 0, val: 200, dur: 0 }, s2: null }

    ];

    const HERO_DB = {};
    const JOB_LIST = ["ì „ì‚¬", "ë§ˆë²•ì‚¬", "ì•”ì‚´ì", "ì‚¬ìˆ˜", "ì¹˜ìœ ì‚¬", "ê¸°ìˆ ì", "ì§€ì›ê°€"];
    const GACHA_RATES = { legendary:0.2, epic:1.8, rare:15, normal:30, apprentice:53 };
    const GRADE_WEIGHT = { legendary:5, epic:4, rare:3, normal:2, apprentice:1 };

    // [ì¤‘ìš”] rawHeroDataê°€ ë¹„ì–´ìˆìœ¼ë¯€ë¡œ ë£¨í”„ê°€ ëŒì§€ ì•ŠìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ë°ì´í„°ë¥¼ ë„£ìœ¼ë©´ ìë™ìœ¼ë¡œ DBì— ë“±ë¡ë©ë‹ˆë‹¤.
    rawHeroData.forEach(u => HERO_DB[u.name] = u);

    let playerData = {
        gems: 3000,
        souls: 0,
        // [ì¤‘ìš”] rawHeroDataê°€ ì—†ìœ¼ë¯€ë¡œ "ë¯¸ì¹´"ë¥¼ ì°¸ì¡°í•˜ë©´ ì—ëŸ¬ê°€ ë‚©ë‹ˆë‹¤. ì¼ë‹¨ ë¹ˆ ì¸ë²¤í† ë¦¬ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.
        inventory: { },
        clearedChapter: 0,
        clearedStage: 0,
        party: [null, null, null, null, null]
    };

    function loadData() {
        const saved = localStorage.getItem('rpgWarlordSave');
        if(saved) playerData = JSON.parse(saved);
        updateCurrencyUI();
    }
    function saveData() {
        localStorage.setItem('rpgWarlordSave', JSON.stringify(playerData));
        updateCurrencyUI();
    }
    function resetGame() {
        if(confirm("ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) { localStorage.removeItem('rpgWarlordSave'); location.reload(); }
    }

    function goToScreen(id) {
        document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
        document.getElementById(`screen-${id}`).classList.add('active');
        if(id==='inventory') renderInventory();
        if(id==='library') renderLibrary();
        if(id==='campaign') renderChapters();
        if(id==='gacha') document.getElementById('gacha-gem').innerText=`ğŸ’ ${playerData.gems}`;
    }
    function updateCurrencyUI() {
        ['lobby','inv','gacha'].forEach(p=>{const el=document.getElementById(`${p}-gem`);if(el)el.innerText=`ğŸ’ ${playerData.gems}`;});
    }

    // --- Inventory ---
    function renderInventory() {
        const grid = document.getElementById('inventory-grid');
        grid.innerHTML = "";
        const sorted = Object.keys(playerData.inventory).sort((a,b) => GRADE_WEIGHT[HERO_DB[b].grade] - GRADE_WEIGHT[HERO_DB[a].grade]);
        sorted.forEach(name => {
            const item = playerData.inventory[name];
            // HERO_DBì— ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ê±´ë„ˆëœ€ (ì—ëŸ¬ ë°©ì§€)
            if(!HERO_DB[name]) return;
            const data = HERO_DB[name];
            const maxHp = Math.floor(data.hp * Math.pow(1.2, item.awaken));
            if(item.curHp === undefined) item.curHp = maxHp;
            const hpPct = (item.curHp / maxHp) * 100;
            const isDead = item.curHp <= 0;
            const canAwaken = item.count >= 3;
            const card = document.createElement('div');
            card.className = `inv-card grade-${data.grade} ${isDead?'dead':''} ${canAwaken?'can-awaken':''}`;
            card.innerHTML = `${isDead?'<div class="dead-badge">DEAD</div>':''}<div style="font-size:30px">${data.icon}</div><div style="font-weight:bold;font-size:12px;margin-top:5px;">${name}</div><div style="font-size:10px;color:#aaa;">${"â˜…".repeat(item.awaken)}</div><div class="hp-bar-mini"><div class="hp-fill-mini" style="width:${hpPct}%"></div></div><div style="font-size:10px;">x${item.count}</div>`;
            card.onclick = () => openDetailModal(name);
            grid.appendChild(card);
        });
    }

    let selectedUnitName = null;
function openDetailModal(name) {
        selectedUnitName = name;
        const item = playerData.inventory[name];
        const data = HERO_DB[name];
        const modal = document.getElementById('detail-modal');
        
        const multi = Math.pow(1.2, item.awaken);
        const nextMulti = Math.pow(1.2, item.awaken + 1); // ë‹¤ìŒ ë‹¨ê³„ ë°°ìœ¨

        const curAtk = Math.floor(data.atk * multi);
        const nextAtk = Math.floor(data.atk * nextMulti);
        const curMaxHp = Math.floor(data.hp * multi);
        const nextMaxHp = Math.floor(data.hp * nextMulti);

        if(item.curHp === undefined) item.curHp = curMaxHp;

        document.getElementById('d-icon').innerText = data.icon;
        document.getElementById('d-icon').className = `detail-icon grade-${data.grade}`;
        document.getElementById('d-name').innerText = name;
        document.getElementById('d-awaken').innerText = "â˜…".repeat(item.awaken);
        document.getElementById('d-job-grade').innerText = `${data.job} | ${data.grade.toUpperCase()}`;

        // ëŠ¥ë ¥ì¹˜ ë¯¸ë¦¬ë³´ê¸° ì ìš©
        let statHtml = `
            <div class="stat-row">
                <span>ê³µê²©ë ¥</span>
                <span>${curAtk} ${item.count >= 3 ? `<span class="stat-up">â–² ${nextAtk - curAtk}</span>` : ''}</span>
            </div>
            <div class="stat-row">
                <span>ì²´ë ¥</span>
                <span>${item.curHp}/${curMaxHp} ${item.count >= 3 ? `<span class="stat-up">â–² ${nextMaxHp - curMaxHp}</span>` : ''}</span>
            </div>`;
        document.getElementById('d-stats').innerHTML = statHtml;
        
        const healBtn = document.getElementById('btn-heal');
        const statusTxt = document.getElementById('d-status');
        healBtn.style.display = 'block'; 
        if(item.curHp <= 0) {
            statusTxt.innerText = "ì‚¬ë§"; statusTxt.style.color="#e74c3c";
            healBtn.innerText = "ë¶€í™œ (ğŸ’500)"; healBtn.onclick = () => reviveUnit(500); healBtn.disabled = playerData.gems < 500;
        } else if(item.curHp < curMaxHp) {
            statusTxt.innerText = "ë¶€ìƒ"; statusTxt.style.color="#f39c12";
            const cost = Math.ceil((curMaxHp-item.curHp)*0.5);
            healBtn.innerText = `ì¹˜ë£Œ (ğŸ’${cost})`; healBtn.onclick = () => healUnitCost(cost, curMaxHp); healBtn.disabled = playerData.gems < cost;
        } else {
            statusTxt.innerText = "ê±´ê°•í•¨"; statusTxt.style.color="#2ecc71"; healBtn.style.display = 'none'; 
        }
        
        document.getElementById('d-skills').innerHTML = `<b>${data.skillName}</b><br>${getSkillVerbose(data.s1)}`;
        
        const synthBtn = document.getElementById('btn-synth');
        if(item.count < 3) {
            synthBtn.style.display = 'none'; 
        } else {
            synthBtn.style.display = 'block';
            synthBtn.innerText = `ëŒíŒŒ ì‹¤í–‰ (3ì¥ ì†Œëª¨)`;
        }
        
        modal.classList.add('active');
    }        
 
    
    function healUnitCost(c, m) { if(playerData.gems>=c){ playerData.gems-=c; playerData.inventory[selectedUnitName].curHp=m; saveData(); openDetailModal(selectedUnitName); renderInventory(); } }
 // ì´ ë©ì–´ë¦¬ë¥¼ í†µì§¸ë¡œ ë³µì‚¬í•´ì„œ ê¸°ì¡´ ìœ„ì¹˜ì— ë®ì–´ì“°ì„¸ìš”.
    function reviveUnit(c) { 
        if(playerData.gems >= c) { 
            playerData.gems -= c; 
            const i = playerData.inventory[selectedUnitName]; 
            i.curHp = Math.floor(HERO_DB[selectedUnitName].hp * Math.pow(1.2, i.awaken)); 
            saveData(); openDetailModal(selectedUnitName); renderInventory(); 
        } 
    }

    function doSynthesis() {
        const i = playerData.inventory[selectedUnitName];
        if(i && i.count >= 3) {
            i.count -= 3;
            i.awaken++;
            const card = document.querySelector('.detail-card');
            if(card) {
                card.classList.add('upgrade-flash');
                setTimeout(() => card.classList.remove('upgrade-flash'), 500);
            }
            saveData();
            openDetailModal(selectedUnitName);
            renderInventory();
        }
    }

    function closeModal(e) { 
        if(e.target.id === 'detail-modal' || e.target.classList.contains('btn-danger')) {
            document.getElementById('detail-modal').classList.remove('active'); 
        }
    }

    // --- Skill Verbose ---
    function getSkillVerbose(s) {
        if(!s) return "ì—†ìŒ";
        let tStr = s.target===10?"ëª¨ë“ ":(s.target===31?"ì²´ë ¥ì´ ê°€ì¥ ë‚®ì€":"ë²”ìœ„ ë‚´");
        let sideStr = s.side===1?"ì•„êµ°ì—ê²Œ":(s.side===2?"ìì‹ ì—ê²Œ":"ì ì—ê²Œ");
        if(s.target===1) tStr="ë‹¨ì¼";
        
        let eff = "";
        if(s.type===1) eff=`${s.val}% í”¼í•´`;
        else if(s.type===2) eff=`ì²´ë ¥ ${s.val} íšŒë³µ`;
        else if(s.type===3) eff=`ë³´í˜¸ë§‰ ${s.val} ë¶€ì—¬`;
        else if(s.type>=41 && s.type<=46) eff=`ëŠ¥ë ¥ì¹˜ ${s.val}ë°° ë³€í™”`;
        else if(s.type===51) eff=`${s.dur}ì´ˆ ê¸°ì ˆ`;
        else if(s.type===52) eff=`${s.dur}ì´ˆ í™”ìƒ`;
        else if(s.type===53) eff=`${s.dur}ì´ˆ ì¤‘ë…`;
        else if(s.type===6) eff=`í•´ë¡œìš´ íš¨ê³¼ ì œê±°`;
        else if(s.type===71) eff=`í„´ ì¦‰ì‹œ íšë“`;
        else if(s.type===72) eff=`ë„ë°œ`;
        return `${tStr} ${sideStr} ${eff}`;
    }

    // --- Party ---
    let tempParty = [];
    function openPartyModal() { tempParty=[...playerData.party]; renderPartyModal(); document.getElementById('party-modal').classList.add('active'); }
    function closePartyModal() { document.getElementById('party-modal').classList.remove('active'); }
    function renderPartyModal() {
        const sc = document.getElementById('party-slots'); sc.innerHTML="";
        tempParty.forEach((n,i)=>{
            const d=document.createElement('div');
            if(n && HERO_DB[n]){
                const u=HERO_DB[n], inv=playerData.inventory[n], dead=inv.curHp<=0;
                d.className=`party-slot filled grade-${u.grade}`;
                d.innerHTML=`<div class="remove-btn" onclick="toggleParty('${n}')">X</div><div>${u.icon}</div><div style="font-size:11px;font-weight:bold;">${n}</div>`;
                if(dead) { d.style.filter="grayscale(100%)"; d.style.opacity="0.6"; }
            } else { d.className="party-slot"; d.innerHTML=`<div style="font-size:20px;color:#555;">+</div>`; }
            sc.appendChild(d);
        });
        const rc = document.getElementById('roster-container'); rc.innerHTML="";
        JOB_LIST.forEach(j=>{
            const col=document.createElement('div'); col.className='job-column';
            col.innerHTML=`<div class="job-header">${j}</div>`;
            const lst=document.createElement('div'); lst.className='job-list';
            const owned=Object.keys(playerData.inventory).filter(n=>HERO_DB[n] && HERO_DB[n].job===j).sort((a,b)=>GRADE_WEIGHT[HERO_DB[b].grade]-GRADE_WEIGHT[HERO_DB[a].grade]);
            owned.forEach(n=>{
                const sel=tempParty.includes(n), inv=playerData.inventory[n], dead=inv.curHp<=0;
                const c=document.createElement('div'); c.className=`roster-card grade-${HERO_DB[n].grade} ${sel?'selected':''} ${dead?'dead':''}`;
                c.innerHTML=`<div>${HERO_DB[n].icon}</div><div style="font-size:11px;">${n}</div>`;
                if(!dead) c.onclick=()=>toggleParty(n);
                lst.appendChild(c);
            });
            col.appendChild(lst); rc.appendChild(col);
        });
    }
    function toggleParty(n) {
        const idx = tempParty.indexOf(n);
        if(idx>=0) tempParty[idx]=null;
        else { const e=tempParty.indexOf(null); if(e>=0) tempParty[e]=n; else alert("íŒŒí‹° ê°€ë“ì°¸"); }
        renderPartyModal();
    }
    function confirmParty() {
        if(tempParty.every(p=>p===null)) return alert("ìµœì†Œ 1ëª…");
        playerData.party=[...tempParty]; saveData(); closePartyModal(); if(document.getElementById('screen-battle').classList.contains('active')) renderBench();
    }

    // --- Battle Setup ---
    let battleInfo = {ch:1,st:1};
    let deployed = [];
    let battleUnits = [];
    let loop = null;

    function renderChapters() {
        const l = document.getElementById('chapter-list'); l.innerHTML="";
        for(let c=1; c<=10; c++) {
            const ul = c <= playerData.clearedChapter + 1;
            const d = document.createElement('div'); d.className='chapter-item';
            d.innerHTML=`<span>Chapter ${c}</span><span>${ul?'OPEN':'LOCKED'}</span>`;
            if(ul) d.onclick = () => { const g=document.getElementById(`grid-ch-${c}`); g.style.display=g.style.display==='grid'?'none':'grid'; };
            l.appendChild(d);
            const g=document.createElement('div'); g.id=`grid-ch-${c}`; g.className='stage-grid';
            for(let s=1; s<=10; s++) {
                let sl = true;
                if(c<=playerData.clearedChapter) sl=false;
                else if(c===playerData.clearedChapter+1 && s<=playerData.clearedStage+1) sl=false;
                const b=document.createElement('div'); 
                b.className=`stage-btn ${sl?'locked':''} ${(c<=playerData.clearedChapter||(c==playerData.clearedChapter+1 && s<=playerData.clearedStage))?'cleared':''}`;
                b.innerText=`Stage ${s}`;
                if(!sl) b.onclick=()=>prepareBattle(c,s);
                g.appendChild(b);
            }
            l.appendChild(g);
        }
    }

    function prepareBattle(c,s) {
        battleInfo={ch:c,st:s}; deployed=[];
        goToScreen('battle');
        document.getElementById('battle-title').innerText=`Chapter ${c} - Stage ${s}`;
        document.getElementById('win-modal').style.display='none';
        document.getElementById('btn-start-battle').disabled=true;
        document.getElementById('btn-auto-deploy').disabled=false;
        
        if(loop) clearInterval(loop); 
        loop=null; 
        battleUnits=[];

        createGrid(); renderBench(); generateEnemies(c,s);
    }

    function createGrid() {
        const c=document.getElementById('grid-container');
        c.innerHTML='<div class="fx-layer" id="fx-layer"></div><div class="result-modal" id="win-modal"></div>';
        document.getElementById('win-modal').innerHTML=`<div class="result-title">VICTORY!</div><div class="reward-box" id="win-reward"></div><button class="btn btn-success" onclick="nextStage()">ë‹¤ìŒ ìŠ¤í…Œì´ì§€ â–¶</button><button class="btn btn-primary" onclick="quitBattle()">ë¡œë¹„ë¡œ</button>`;
        for(let r=0;r<9;r++) for(let col=0;col<15;col++){
            const h=document.createElement('div'); h.className='hex';
            h.style.left=(col*34*1.5+20)+'px'; h.style.top=(r*58.9+(col%2?29.45:0)+20)+'px';
            h.dataset.r=r; h.dataset.c=col;
            if(col<5) h.onclick=()=>handleHexClick(r,col);
            c.appendChild(h);
        }
    }

    let selectedBench=null;
    function renderBench() {
        const l=document.getElementById('bench-list'); l.innerHTML="";
        playerData.party.forEach(n=>{
            if(!n || !HERO_DB[n])return;
            const i=playerData.inventory[n], d=HERO_DB[n], dead=i.curHp<=0, dep=deployed.some(u=>u.name===n);
            const b=document.createElement('div');
            b.className=`bench-unit grade-${d.grade} ${dead?'dead':''} ${dep?'deployed':''}`;
            b.innerHTML=`<div>${d.icon}</div><div style="font-size:10px;">${n}</div>`;
            if(!dead && !dep) b.onclick=()=>{ document.querySelectorAll('.bench-unit').forEach(e=>e.classList.remove('selected')); b.classList.add('selected'); selectedBench=n; highlightHexes(true); };
            l.appendChild(b);
        });
    }
    function highlightHexes(on) { document.querySelectorAll('.hex').forEach(h=>{if(h.dataset.c<5)h.classList.toggle('valid-target',on);}); }
    function handleHexClick(r,c) {
        if(!selectedBench || deployed.some(u=>u.r===r && u.c===c)) return;
        deployed.push({name:selectedBench,r,c}); placeUnit(selectedBench,r,c,'A');
        selectedBench=null; highlightHexes(false); renderBench(); document.getElementById('btn-start-battle').disabled=false;
    }
    function placeUnit(n,r,c,s,mob=false) {
        const con=document.getElementById('grid-container'), u=mob?monsterData.find(m=>m.name===n):HERO_DB[n];
        let hpPct=100;
        if(!mob) { const i=playerData.inventory[n], max=Math.floor(u.hp*Math.pow(1.2,i.awaken)); hpPct=(i.curHp/max)*100; }
        const el=document.createElement('div'); el.className=`unit-obj team-${s.toLowerCase()} grade-${u.grade}`;
        el.style.left=(c*34*1.5+30)+'px'; el.style.top=(r*58.9+(c%2?29.45:0)+25)+'px'; el.dataset.id=`${s}-${r}-${c}`;
        el.innerHTML=`<div class="status-row"></div>${u.icon}<div class="unit-name-tag">${u.name}</div><div class="bars"><div class="bar-bg"><div class="hp-damage-buffer" style="width:${hpPct}%"></div><div class="hp-fill" style="width:${hpPct}%"></div><div class="shield-fill" style="width:0%"></div></div><div class="skill-bar-bg"><div class="skill-fill" style="width:0%"></div></div></div>`;
        con.appendChild(el);
    }
    function autoDeploy() {
        deployed=[]; document.querySelectorAll('.team-a').forEach(e=>e.remove());
        const pus=playerData.party.filter(n=>n && playerData.inventory[n].curHp>0);
        let f=[{r:2,c:4},{r:4,c:4},{r:6,c:4},{r:1,c:4},{r:7,c:4},{r:3,c:4},{r:5,c:4}], b=[{r:2,c:2},{r:4,c:2},{r:6,c:2},{r:3,c:1},{r:5,c:1},{r:1,c:1},{r:7,c:1},{r:0,c:0}];
        pus.forEach(n=>{
            if(!HERO_DB[n]) return;
            const j=HERO_DB[n].job;
            let s = (['ì „ì‚¬','ì•”ì‚´ì','ê¸°ìˆ ì'].includes(j)) ? (f.shift()||b.shift()) : (b.shift()||f.shift());
            if(s) { deployed.push({name:n,r:s.r,c:s.c}); placeUnit(n,s.r,s.c,'A'); }
        });
        renderBench(); document.getElementById('btn-start-battle').disabled=deployed.length===0;
    }
// [2] ìŠ¤í…Œì´ì§€ ë°°ì¹˜ ë°ì´í„° (ì—‘ì…€ì—ì„œ ë³µì‚¬í•œ ê²ƒ)
    const flatStageData = [
{ s: "1-1", name: "ìŠ¬ë¼ì„", r: 4, c: 12 },
{ s: "1-1", name: "ìŠ¬ë¼ì„", r: 3, c: 11 },
{ s: "1-1", name: "ìŠ¬ë¼ì„", r: 5, c: 11 },
{ s: "1-1", name: "ì¥", r: 2, c: 11 },
{ s: "1-1", name: "ì¥", r: 6, c: 11 },
{ s: "1-2", name: "ìŠ¬ë¼ì„", r: 0, c: 11 },
{ s: "1-2", name: "ìŠ¬ë¼ì„", r: 2, c: 11 },
{ s: "1-2", name: "ì¥", r: 4, c: 11 },
{ s: "1-2", name: "ì¥", r: 6, c: 11 },
{ s: "1-2", name: "ì¥", r: 8, c: 11 },
{ s: "1-2", name: "ì¥", r: 1, c: 12 },
{ s: "1-2", name: "ì¥", r: 3, c: 12 },
{ s: "1-2", name: "ì¥", r: 5, c: 12 },
{ s: "1-2", name: "ì¥", r: 7, c: 12 },
{ s: "1-3", name: "ëŠ‘ëŒ€", r: 4, c: 12 },
{ s: "1-3", name: "ê±°ë¯¸", r: 2, c: 12 },
{ s: "1-3", name: "ê±°ë¯¸", r: 6, c: 12 },
{ s: "1-3", name: "ê±°ë¯¸", r: 3, c: 11 },
{ s: "1-3", name: "ê±°ë¯¸", r: 5, c: 11 },
{ s: "1-3", name: "ê±°ë¯¸", r: 1, c: 11 },
{ s: "1-3", name: "ê±°ë¯¸", r: 7, c: 11 },
{ s: "1-4", name: "ëŠ‘ëŒ€", r: 4, c: 11 },
{ s: "1-4", name: "ë©§ë¼ì§€", r: 2, c: 11 },
{ s: "1-4", name: "ë©§ë¼ì§€", r: 6, c: 11 },
{ s: "1-4", name: "ëŠ‘ëŒ€", r: 3, c: 13 },
{ s: "1-4", name: "ë©§ë¼ì§€", r: 5, c: 13 },
{ s: "1-4", name: "ê±°ë¯¸", r: 1, c: 13 },
{ s: "1-4", name: "ê±°ë¯¸", r: 7, c: 13 },
{ s: "1-5", name: "ë±€", r: 3, c: 11 },
{ s: "1-5", name: "ë±€", r: 5, c: 11 },
{ s: "1-5", name: "ë±€", r: 1, c: 11 },
{ s: "1-5", name: "ë±€", r: 7, c: 11 },
{ s: "1-5", name: "ë±€", r: 4, c: 12 },
{ s: "1-5", name: "ëŠ‘ëŒ€", r: 2, c: 13 },
{ s: "1-5", name: "ë²„ì„¯ëŒì´", r: 6, c: 13 },
{ s: "1-6", name: "ëŒê²Œ", r: 4, c: 11 },
{ s: "1-6", name: "ëŠ‘ëŒ€", r: 2, c: 11 },
{ s: "1-6", name: "ëŠ‘ëŒ€", r: 6, c: 11 },
{ s: "1-6", name: "ë°•ì¥", r: 1, c: 12 },
{ s: "1-6", name: "ë°•ì¥", r: 3, c: 12 },
{ s: "1-6", name: "ë°•ì¥", r: 5, c: 12 },
{ s: "1-6", name: "ë°•ì¥", r: 7, c: 12 },
{ s: "1-7", name: "ê³ ë¸”ë¦°", r: 3, c: 11 },
{ s: "1-7", name: "ëŠ‘ëŒ€", r: 5, c: 11 },
{ s: "1-7", name: "ë„ì ", r: 1, c: 11 },
{ s: "1-7", name: "ë„ì ", r: 7, c: 11 },
{ s: "1-7", name: "ë±€", r: 2, c: 13 },
{ s: "1-7", name: "ë°•ì¥", r: 4, c: 13 },
{ s: "1-7", name: "ë°•ì¥", r: 6, c: 13 },
{ s: "1-8", name: "ë°•ì¥", r: 4, c: 12 },
{ s: "1-8", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 2, c: 12 },
{ s: "1-8", name: "ë„ì ", r: 6, c: 12 },
{ s: "1-8", name: "ë„ì ", r: 1, c: 13 },
{ s: "1-8", name: "ë„ì ", r: 3, c: 13 },
{ s: "1-8", name: "í•˜í”¼", r: 5, c: 13 },
{ s: "1-8", name: "í•˜í”¼", r: 7, c: 13 },
{ s: "1-9", name: "ì˜¤í¬", r: 4, c: 11 },
{ s: "1-9", name: "ì˜¤í¬", r: 2, c: 11 },
{ s: "1-9", name: "ì˜¤í¬", r: 6, c: 11 },
{ s: "1-9", name: "ë²„ì„¯ëŒì´", r: 0, c: 11 },
{ s: "1-9", name: "í•˜í”¼", r: 8, c: 11 },
{ s: "1-9", name: "ë²„ì„¯ëŒì´", r: 3, c: 13 },
{ s: "1-9", name: "ë²„ì„¯ëŒì´", r: 5, c: 13 },
{ s: "1-10", name: "í‚¹ìŠ¬ë¼ì„", r: 4, c: 12 },
{ s: "1-10", name: "ìŠ¬ë¼ì„", r: 2, c: 12 },
{ s: "1-10", name: "ìŠ¬ë¼ì„", r: 6, c: 12 },
{ s: "1-10", name: "ìŠ¬ë¼ì„", r: 3, c: 11 },
{ s: "1-10", name: "ìŠ¬ë¼ì„", r: 5, c: 11 },
{ s: "1-10", name: "ìŠ¬ë¼ì„", r: 1, c: 11 },
{ s: "1-10", name: "ìŠ¬ë¼ì„", r: 7, c: 11 },
{ s: "2-1", name: "ê±°ë¯¸", r: 3, c: 12 },
{ s: "2-1", name: "ê±°ë¯¸", r: 5, c: 12 },
{ s: "2-1", name: "ê±°ë¯¸", r: 1, c: 12 },
{ s: "2-1", name: "ê±°ë¯¸", r: 7, c: 12 },
{ s: "2-1", name: "ì¥", r: 2, c: 11 },
{ s: "2-1", name: "ì˜¤í¬", r: 4, c: 11 },
{ s: "2-1", name: "ì¥", r: 6, c: 11 },
{ s: "2-2", name: "ë°•ì¥", r: 0, c: 12 },
{ s: "2-2", name: "ë°•ì¥", r: 2, c: 12 },
{ s: "2-2", name: "ë°•ì¥", r: 4, c: 12 },
{ s: "2-2", name: "ë°•ì¥", r: 6, c: 12 },
{ s: "2-2", name: "ë°•ì¥", r: 8, c: 12 },
{ s: "2-2", name: "ì¥", r: 1, c: 11 },
{ s: "2-2", name: "í•˜í”¼", r: 3, c: 11 },
{ s: "2-2", name: "ì¥", r: 5, c: 11 },
{ s: "2-2", name: "ì¥", r: 7, c: 11 },
{ s: "2-3", name: "í•˜í”¼", r: 2, c: 11 },
{ s: "2-3", name: "í•˜í”¼", r: 4, c: 11 },
{ s: "2-3", name: "ë±€", r: 6, c: 11 },
{ s: "2-3", name: "ë±€", r: 0, c: 11 },
{ s: "2-3", name: "ë²„ì„¯ëŒì´", r: 8, c: 11 },
{ s: "2-3", name: "ë²„ì„¯ëŒì´", r: 3, c: 13 },
{ s: "2-3", name: "ë²„ì„¯ëŒì´", r: 5, c: 13 },
{ s: "2-4", name: "ë¦¬ìë“œë§¨", r: 4, c: 12 },
{ s: "2-4", name: "ë¦¬ìë“œë§¨", r: 2, c: 12 },
{ s: "2-4", name: "ë¦¬ìë“œë§¨", r: 6, c: 12 },
{ s: "2-4", name: "ê±°ë¯¸", r: 3, c: 11 },
{ s: "2-4", name: "ê±°ë¯¸", r: 5, c: 11 },
{ s: "2-4", name: "ê±°ë¯¸", r: 1, c: 11 },
{ s: "2-4", name: "ê±°ë¯¸", r: 7, c: 11 },
{ s: "2-5", name: "ë©§ë¼ì§€", r: 4, c: 11 },
{ s: "2-5", name: "ë©§ë¼ì§€", r: 2, c: 11 },
{ s: "2-5", name: "ë©§ë¼ì§€", r: 6, c: 11 },
{ s: "2-5", name: "ë±€", r: 3, c: 13 },
{ s: "2-5", name: "ë±€", r: 5, c: 13 },
{ s: "2-5", name: "ë±€", r: 1, c: 13 },
{ s: "2-5", name: "ë±€", r: 7, c: 13 },
{ s: "2-6", name: "ë²„ì„¯ëŒì´", r: 3, c: 12 },
{ s: "2-6", name: "ë¦¬ìë“œë§¨", r: 5, c: 12 },
{ s: "2-6", name: "ë¦¬ìë“œë§¨", r: 1, c: 12 },
{ s: "2-6", name: "ë¦¬ìë“œë§¨", r: 7, c: 12 },
{ s: "2-6", name: "ë²„ì„¯ëŒì´", r: 4, c: 14 },
{ s: "2-6", name: "ì¥", r: 4, c: 11 },
{ s: "2-7", name: "ê±°ë¯¸", r: 2, c: 11 },
{ s: "2-7", name: "ê±°ë¯¸", r: 4, c: 11 },
{ s: "2-7", name: "ê±°ë¯¸", r: 6, c: 11 },
{ s: "2-7", name: "ë„ì ", r: 3, c: 13 },
{ s: "2-7", name: "ë„ì ", r: 5, c: 13 },
{ s: "2-7", name: "ë„ì ", r: 1, c: 13 },
{ s: "2-7", name: "ë„ì ", r: 7, c: 13 },
{ s: "2-8", name: "ë©§ë¼ì§€", r: 3, c: 11 },
{ s: "2-8", name: "ë©§ë¼ì§€", r: 5, c: 11 },
{ s: "2-8", name: "ë©§ë¼ì§€", r: 1, c: 11 },
{ s: "2-8", name: "ë©§ë¼ì§€", r: 7, c: 11 },
{ s: "2-8", name: "í‘ë§ˆë²•ì‚¬", r: 4, c: 13 },
{ s: "2-9", name: "ë¦¬ìë“œë§¨", r: 4, c: 11 },
{ s: "2-9", name: "ë¦¬ìë“œë§¨", r: 2, c: 11 },
{ s: "2-9", name: "ë¦¬ìë“œë§¨", r: 6, c: 11 },
{ s: "2-9", name: "ë±€", r: 3, c: 12 },
{ s: "2-9", name: "ë±€", r: 5, c: 12 },
{ s: "2-9", name: "ë±€", r: 1, c: 12 },
{ s: "2-9", name: "ë±€", r: 7, c: 12 },
{ s: "2-10", name: "ë°”ì‹¤ë¦¬ìŠ¤í¬", r: 4, c: 12 },
{ s: "2-10", name: "ë±€", r: 2, c: 11 },
{ s: "2-10", name: "ë±€", r: 6, c: 11 },
{ s: "2-10", name: "ë±€", r: 0, c: 11 },
{ s: "2-10", name: "ë±€", r: 8, c: 11 },
{ s: "2-10", name: "ê±°ë¯¸", r: 3, c: 12 },
{ s: "2-10", name: "ê±°ë¯¸", r: 5, c: 12 },
{ s: "3-1", name: "ëŠ‘ëŒ€", r: 4, c: 11 },
{ s: "3-1", name: "ëŠ‘ëŒ€", r: 2, c: 11 },
{ s: "3-1", name: "ëŠ‘ëŒ€", r: 6, c: 11 },
{ s: "3-1", name: "ëŠ‘ëŒ€", r: 0, c: 11 },
{ s: "3-1", name: "ì¥", r: 8, c: 11 },
{ s: "3-1", name: "ì¥", r: 3, c: 10 },
{ s: "3-1", name: "ì¥", r: 5, c: 10 },
{ s: "3-2", name: "ëŠ‘ëŒ€", r: 2, c: 12 },
{ s: "3-2", name: "ëŠ‘ëŒ€", r: 6, c: 12 },
{ s: "3-2", name: "ì¥", r: 0, c: 11 },
{ s: "3-2", name: "ì¥", r: 2, c: 11 },
{ s: "3-2", name: "ë°•ì¥", r: 4, c: 11 },
{ s: "3-2", name: "ë°•ì¥", r: 6, c: 11 },
{ s: "3-2", name: "ë°•ì¥", r: 8, c: 11 },
{ s: "3-3", name: "í•˜í”¼", r: 3, c: 13 },
{ s: "3-3", name: "í•˜í”¼", r: 5, c: 13 },
{ s: "3-3", name: "í•˜í”¼", r: 1, c: 13 },
{ s: "3-3", name: "í•˜í”¼", r: 7, c: 13 },
{ s: "3-3", name: "ëŠ‘ëŒ€", r: 4, c: 11 },
{ s: "3-3", name: "ëŠ‘ëŒ€", r: 2, c: 11 },
{ s: "3-3", name: "ëŠ‘ëŒ€", r: 6, c: 11 },
{ s: "3-4", name: "ê³ ë¸”ë¦°", r: 3, c: 11 },
{ s: "3-4", name: "ê³ ë¸”ë¦°", r: 5, c: 11 },
{ s: "3-4", name: "ê³ ë¸”ë¦°", r: 1, c: 11 },
{ s: "3-4", name: "ê³ ë¸”ë¦°", r: 7, c: 11 },
{ s: "3-4", name: "ë„ì ", r: 4, c: 13 },
{ s: "3-4", name: "ë„ì ", r: 2, c: 13 },
{ s: "3-4", name: "ë„ì ", r: 6, c: 13 },
{ s: "3-5", name: "ê³°", r: 4, c: 12 },
{ s: "3-5", name: "ê³°", r: 2, c: 12 },
{ s: "3-5", name: "ê³°", r: 6, c: 12 },
{ s: "3-5", name: "ëŠ‘ëŒ€", r: 3, c: 11 },
{ s: "3-5", name: "ëŠ‘ëŒ€", r: 5, c: 11 },
{ s: "3-5", name: "ëŠ‘ëŒ€", r: 1, c: 11 },
{ s: "3-5", name: "ëŠ‘ëŒ€", r: 7, c: 11 },
{ s: "3-6", name: "í•˜í”¼", r: 0, c: 14 },
{ s: "3-6", name: "í•˜í”¼", r: 2, c: 14 },
{ s: "3-6", name: "í•˜í”¼", r: 6, c: 14 },
{ s: "3-6", name: "í•˜í”¼", r: 8, c: 14 },
{ s: "3-6", name: "ë©§ë¼ì§€", r: 3, c: 11 },
{ s: "3-6", name: "ë©§ë¼ì§€", r: 5, c: 11 },
{ s: "3-7", name: "ê³ ë¸”ë¦°", r: 2, c: 11 },
{ s: "3-7", name: "ê³ ë¸”ë¦°", r: 4, c: 11 },
{ s: "3-7", name: "ê³ ë¸”ë¦°", r: 6, c: 11 },
{ s: "3-7", name: "ë¯¸ë¼", r: 0, c: 11 },
{ s: "3-7", name: "ë¯¸ë¼", r: 8, c: 11 },
{ s: "3-7", name: "ë²„ì„¯ëŒì´", r: 4, c: 13 },
{ s: "3-8", name: "ë‹¤í¬ì—˜í”„", r: 4, c: 12 },
{ s: "3-8", name: "ëŠ‘ëŒ€", r: 2, c: 12 },
{ s: "3-8", name: "ëŠ‘ëŒ€", r: 6, c: 12 },
{ s: "3-8", name: "ë°•ì¥", r: 1, c: 11 },
{ s: "3-8", name: "ë°•ì¥", r: 3, c: 11 },
{ s: "3-8", name: "ë°•ì¥", r: 5, c: 11 },
{ s: "3-8", name: "ë°•ì¥", r: 7, c: 11 },
{ s: "3-9", name: "ê³°", r: 3, c: 11 },
{ s: "3-9", name: "ê³°", r: 5, c: 11 },
{ s: "3-9", name: "ê³°", r: 1, c: 11 },
{ s: "3-9", name: "ê³°", r: 7, c: 11 },
{ s: "3-9", name: "ë„ì ", r: 4, c: 13 },
{ s: "3-10", name: "ì›¨ì–´ìš¸í”„", r: 4, c: 12 },
{ s: "3-10", name: "ëŠ‘ëŒ€", r: 2, c: 12 },
{ s: "3-10", name: "ëŠ‘ëŒ€", r: 6, c: 12 },
{ s: "3-10", name: "ëŠ‘ëŒ€", r: 0, c: 12 },
{ s: "3-10", name: "ëŠ‘ëŒ€", r: 8, c: 12 },
{ s: "3-10", name: "í•˜í”¼", r: 3, c: 13 },
{ s: "3-10", name: "í•˜í”¼", r: 5, c: 13 },
{ s: "4-1", name: "ì¢€ë¹„", r: 3, c: 11 },
{ s: "4-1", name: "ì¢€ë¹„", r: 5, c: 11 },
{ s: "4-1", name: "ì¢€ë¹„", r: 1, c: 11 },
{ s: "4-1", name: "ì¢€ë¹„", r: 7, c: 11 },
{ s: "4-1", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 4, c: 12 },
{ s: "4-2", name: "ì¢€ë¹„", r: 0, c: 11 },
{ s: "4-2", name: "ì¢€ë¹„", r: 2, c: 11 },
{ s: "4-2", name: "ì¢€ë¹„", r: 4, c: 11 },
{ s: "4-2", name: "ì¢€ë¹„", r: 6, c: 11 },
{ s: "4-2", name: "ì¢€ë¹„", r: 8, c: 11 },
{ s: "4-2", name: "ë°•ì¥", r: 3, c: 12 },
{ s: "4-2", name: "ë°•ì¥", r: 5, c: 12 },
{ s: "4-3", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 3, c: 11 },
{ s: "4-3", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 5, c: 11 },
{ s: "4-3", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 1, c: 11 },
{ s: "4-3", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 7, c: 11 },
{ s: "4-3", name: "ë¯¸ë¼", r: 4, c: 12 },
{ s: "4-4", name: "ë¯¸ë¼", r: 2, c: 12 },
{ s: "4-4", name: "ë¯¸ë¼", r: 6, c: 12 },
{ s: "4-4", name: "ë¯¸ë¼", r: 4, c: 12 },
{ s: "4-4", name: "ì¢€ë¹„", r: 3, c: 11 },
{ s: "4-4", name: "ì¢€ë¹„", r: 5, c: 11 },
{ s: "4-4", name: "ì¢€ë¹„", r: 1, c: 11 },
{ s: "4-4", name: "ì¢€ë¹„", r: 7, c: 11 },
{ s: "4-5", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 4, c: 13 },
{ s: "4-5", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 2, c: 13 },
{ s: "4-5", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 6, c: 13 },
{ s: "4-5", name: "ì¢€ë¹„", r: 3, c: 11 },
{ s: "4-5", name: "ì¢€ë¹„", r: 5, c: 11 },
{ s: "4-5", name: "ì¢€ë¹„", r: 1, c: 11 },
{ s: "4-5", name: "ì¢€ë¹„", r: 7, c: 11 },
{ s: "4-6", name: "ìœ ë ¹", r: 1, c: 13 },
{ s: "4-6", name: "ìœ ë ¹", r: 3, c: 13 },
{ s: "4-6", name: "ìœ ë ¹", r: 5, c: 13 },
{ s: "4-6", name: "ìœ ë ¹", r: 7, c: 13 },
{ s: "4-6", name: "ìœ ë ¹", r: 4, c: 11 },
{ s: "4-7", name: "ì¢€ë¹„", r: 2, c: 11 },
{ s: "4-7", name: "ì¢€ë¹„", r: 4, c: 11 },
{ s: "4-7", name: "ì¢€ë¹„", r: 6, c: 11 },
{ s: "4-7", name: "ì¢€ë¹„", r: 0, c: 11 },
{ s: "4-7", name: "ì¢€ë¹„", r: 8, c: 11 },
{ s: "4-7", name: "ì¢€ë¹„", r: 3, c: 12 },
{ s: "4-7", name: "ì¢€ë¹„", r: 5, c: 12 },
{ s: "4-8", name: "ë¯¸ë¼", r: 3, c: 12 },
{ s: "4-8", name: "ë¯¸ë¼", r: 5, c: 12 },
{ s: "4-8", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 4, c: 11 },
{ s: "4-8", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 2, c: 11 },
{ s: "4-8", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 6, c: 11 },
{ s: "4-8", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 4, c: 14 },
{ s: "4-9", name: "í‘ë§ˆë²•ì‚¬", r: 4, c: 13 },
{ s: "4-9", name: "ì¢€ë¹„", r: 2, c: 11 },
{ s: "4-9", name: "ì¢€ë¹„", r: 6, c: 11 },
{ s: "4-9", name: "ì¢€ë¹„", r: 0, c: 11 },
{ s: "4-9", name: "ì¢€ë¹„", r: 8, c: 11 },
{ s: "4-9", name: "ë°•ì¥", r: 3, c: 12 },
{ s: "4-9", name: "ë°•ì¥", r: 5, c: 12 },
{ s: "4-10", name: "ë°ìŠ¤ë‚˜ì´íŠ¸", r: 4, c: 12 },
{ s: "4-10", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 2, c: 13 },
{ s: "4-10", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 6, c: 13 },
{ s: "4-10", name: "ì¢€ë¹„", r: 3, c: 11 },
{ s: "4-10", name: "ì¢€ë¹„", r: 5, c: 11 },
{ s: "4-10", name: "ì¢€ë¹„", r: 1, c: 11 },
{ s: "4-10", name: "ì¢€ë¹„", r: 7, c: 11 },
{ s: "5-1", name: "ëŒê²Œ", r: 3, c: 11 },
{ s: "5-1", name: "ëŒê²Œ", r: 5, c: 11 },
{ s: "5-1", name: "ëŒê²Œ", r: 1, c: 11 },
{ s: "5-1", name: "ëŒê²Œ", r: 7, c: 11 },
{ s: "5-1", name: "ë„ì ", r: 4, c: 13 },
{ s: "5-1", name: "ë„ì ", r: 2, c: 13 },
{ s: "5-1", name: "ë„ì ", r: 6, c: 13 },
{ s: "5-2", name: "ëŒê²Œ", r: 2, c: 11 },
{ s: "5-2", name: "ëŒê²Œ", r: 4, c: 11 },
{ s: "5-2", name: "ëŒê²Œ", r: 6, c: 11 },
{ s: "5-2", name: "ëŒê²Œ", r: 0, c: 11 },
{ s: "5-2", name: "ëŒê²Œ", r: 8, c: 11 },
{ s: "5-2", name: "ì˜¤í¬", r: 3, c: 13 },
{ s: "5-2", name: "ì˜¤í¬", r: 5, c: 13 },
{ s: "5-3", name: "ê³¨ë ˜", r: 4, c: 11 },
{ s: "5-3", name: "ì˜¤í¬", r: 2, c: 11 },
{ s: "5-3", name: "ì˜¤í¬", r: 6, c: 11 },
{ s: "5-3", name: "í•˜í”¼", r: 3, c: 13 },
{ s: "5-3", name: "í•˜í”¼", r: 5, c: 13 },
{ s: "5-3", name: "í•˜í”¼", r: 1, c: 13 },
{ s: "5-3", name: "í•˜í”¼", r: 7, c: 13 },
{ s: "5-4", name: "ì˜¤í¬", r: 3, c: 11 },
{ s: "5-4", name: "ì˜¤í¬", r: 5, c: 11 },
{ s: "5-4", name: "ì˜¤í¬", r: 1, c: 11 },
{ s: "5-4", name: "ì˜¤í¬", r: 7, c: 11 },
{ s: "5-4", name: "ë²„ì„¯ëŒì´", r: 4, c: 13 },
{ s: "5-4", name: "ë²„ì„¯ëŒì´", r: 2, c: 13 },
{ s: "5-4", name: "ë²„ì„¯ëŒì´", r: 6, c: 13 },
{ s: "5-5", name: "íŠ¸ë¡¤", r: 4, c: 11 },
{ s: "5-5", name: "ëŒê²Œ", r: 3, c: 12 },
{ s: "5-5", name: "ëŒê²Œ", r: 5, c: 12 },
{ s: "5-5", name: "ëŒê²Œ", r: 1, c: 12 },
{ s: "5-5", name: "ëŒê²Œ", r: 7, c: 12 },
{ s: "5-6", name: "ê³¨ë ˜", r: 2, c: 11 },
{ s: "5-6", name: "ê³¨ë ˜", r: 6, c: 11 },
{ s: "5-6", name: "ì˜¤í¬", r: 4, c: 11 },
{ s: "5-6", name: "ë„ì ", r: 4, c: 14 },
{ s: "5-6", name: "ë„ì ", r: 2, c: 14 },
{ s: "5-6", name: "ë„ì ", r: 6, c: 14 },
{ s: "5-7", name: "ì˜¤í¬", r: 2, c: 11 },
{ s: "5-7", name: "ì˜¤í¬", r: 4, c: 11 },
{ s: "5-7", name: "ì˜¤í¬", r: 6, c: 11 },
{ s: "5-7", name: "ì˜¤í¬", r: 0, c: 11 },
{ s: "5-7", name: "ì˜¤í¬", r: 8, c: 11 },
{ s: "5-7", name: "ì˜¤í¬", r: 3, c: 12 },
{ s: "5-7", name: "ì˜¤í¬", r: 5, c: 12 },
{ s: "5-8", name: "íŠ¸ë¡¤", r: 4, c: 11 },
{ s: "5-8", name: "íŠ¸ë¡¤", r: 2, c: 11 },
{ s: "5-8", name: "íŠ¸ë¡¤", r: 6, c: 11 },
{ s: "5-8", name: "ë²„ì„¯ëŒì´", r: 3, c: 13 },
{ s: "5-8", name: "ë²„ì„¯ëŒì´", r: 5, c: 13 },
{ s: "5-9", name: "ê³¨ë ˜", r: 4, c: 11 },
{ s: "5-9", name: "í‘ë§ˆë²•ì‚¬", r: 2, c: 13 },
{ s: "5-9", name: "í‘ë§ˆë²•ì‚¬", r: 6, c: 13 },
{ s: "5-9", name: "ì˜¤í¬", r: 3, c: 12 },
{ s: "5-9", name: "ì˜¤í¬", r: 5, c: 12 },
{ s: "5-10", name: "ê°•ì² ê³¨ë ˜", r: 4, c: 12 },
{ s: "5-10", name: "ëŒê²Œ", r: 3, c: 11 },
{ s: "5-10", name: "ëŒê²Œ", r: 5, c: 11 },
{ s: "5-10", name: "ëŒê²Œ", r: 1, c: 11 },
{ s: "5-10", name: "ëŒê²Œ", r: 7, c: 11 },
{ s: "5-10", name: "ë„ì ", r: 2, c: 13 },
{ s: "5-10", name: "ë„ì ", r: 6, c: 13 },
{ s: "6-1", name: "ì •ë ¹(ë¶ˆ)", r: 3, c: 12 },
{ s: "6-1", name: "ì •ë ¹(ë¶ˆ)", r: 5, c: 12 },
{ s: "6-1", name: "ì •ë ¹(ë¶ˆ)", r: 1, c: 12 },
{ s: "6-1", name: "ì •ë ¹(ë¶ˆ)", r: 7, c: 12 },
{ s: "6-1", name: "ì˜¤í¬", r: 4, c: 11 },
{ s: "6-2", name: "ì •ë ¹(ë¶ˆ)", r: 2, c: 12 },
{ s: "6-2", name: "ì •ë ¹(ë¶ˆ)", r: 4, c: 12 },
{ s: "6-2", name: "ì •ë ¹(ë¶ˆ)", r: 6, c: 12 },
{ s: "6-2", name: "ì •ë ¹(ë¶ˆ)", r: 0, c: 12 },
{ s: "6-2", name: "ì •ë ¹(ë¶ˆ)", r: 8, c: 12 },
{ s: "6-2", name: "ë±€", r: 3, c: 11 },
{ s: "6-2", name: "ë±€", r: 5, c: 11 },
{ s: "6-3", name: "ì„œíë²„ìŠ¤", r: 4, c: 13 },
{ s: "6-3", name: "ì •ë ¹(ë¶ˆ)", r: 3, c: 12 },
{ s: "6-3", name: "ì •ë ¹(ë¶ˆ)", r: 5, c: 12 },
{ s: "6-3", name: "ë±€", r: 2, c: 11 },
{ s: "6-3", name: "ë±€", r: 6, c: 11 },
{ s: "6-3", name: "ë±€", r: 0, c: 11 },
{ s: "6-3", name: "ë±€", r: 8, c: 11 },
{ s: "6-4", name: "ì²œì‚¬ë³‘ì¥", r: 4, c: 12 },
{ s: "6-4", name: "ìŠ¬ë¼ì„", r: 2, c: 11 },
{ s: "6-4", name: "ìŠ¬ë¼ì„", r: 6, c: 11 },
{ s: "6-4", name: "ìŠ¬ë¼ì„", r: 3, c: 11 },
{ s: "6-4", name: "ìŠ¬ë¼ì„", r: 5, c: 11 },
{ s: "6-4", name: "ìŠ¬ë¼ì„", r: 0, c: 11 },
{ s: "6-4", name: "ìŠ¬ë¼ì„", r: 8, c: 11 },
{ s: "6-5", name: "ì •ë ¹(ë¶ˆ)", r: 2, c: 12 },
{ s: "6-5", name: "ì •ë ¹(ë¶ˆ)", r: 4, c: 12 },
{ s: "6-5", name: "ì •ë ¹(ë¶ˆ)", r: 6, c: 12 },
{ s: "6-5", name: "ì •ë ¹(ë¶ˆ)", r: 0, c: 12 },
{ s: "6-5", name: "ì •ë ¹(ë¶ˆ)", r: 8, c: 12 },
{ s: "6-5", name: "ì˜¤í¬", r: 4, c: 11 },
{ s: "6-6", name: "ì„œíë²„ìŠ¤", r: 3, c: 13 },
{ s: "6-6", name: "ì„œíë²„ìŠ¤", r: 5, c: 13 },
{ s: "6-6", name: "ì˜¤í¬", r: 4, c: 11 },
{ s: "6-6", name: "ì˜¤í¬", r: 2, c: 11 },
{ s: "6-6", name: "ì˜¤í¬", r: 6, c: 11 },
{ s: "6-7", name: "í‘ë§ˆë²•ì‚¬", r: 1, c: 14 },
{ s: "6-7", name: "í‘ë§ˆë²•ì‚¬", r: 7, c: 14 },
{ s: "6-7", name: "í‘ë§ˆë²•ì‚¬", r: 4, c: 14 },
{ s: "6-7", name: "íŠ¸ë¡¤", r: 3, c: 11 },
{ s: "6-7", name: "íŠ¸ë¡¤", r: 5, c: 11 },
{ s: "6-8", name: "ì²œì‚¬ë³‘ì¥", r: 4, c: 12 },
{ s: "6-8", name: "ë²„ì„¯ëŒì´", r: 4, c: 14 },
{ s: "6-8", name: "ë²„ì„¯ëŒì´", r: 2, c: 14 },
{ s: "6-8", name: "ë²„ì„¯ëŒì´", r: 6, c: 14 },
{ s: "6-8", name: "ê³¨ë ˜", r: 4, c: 10 },
{ s: "6-9", name: "ì •ë ¹(ë¶ˆ)", r: 2, c: 12 },
{ s: "6-9", name: "ì •ë ¹(ë¶ˆ)", r: 6, c: 12 },
{ s: "6-9", name: "ì •ë ¹(ë¶ˆ)", r: 0, c: 12 },
{ s: "6-9", name: "ì •ë ¹(ë¶ˆ)", r: 8, c: 12 },
{ s: "6-9", name: "ì˜¤ìš°ê±°", r: 4, c: 11 },
{ s: "6-10", name: "ì´í”„ë¦¬íŠ¸", r: 4, c: 13 },
{ s: "6-10", name: "ì •ë ¹(ë¶ˆ)", r: 2, c: 12 },
{ s: "6-10", name: "ì •ë ¹(ë¶ˆ)", r: 6, c: 12 },
{ s: "6-10", name: "ì •ë ¹(ë¶ˆ)", r: 3, c: 12 },
{ s: "6-10", name: "ì •ë ¹(ë¶ˆ)", r: 5, c: 12 },
{ s: "7-1", name: "ë‹¤í¬ì—˜í”„", r: 4, c: 11 },
{ s: "7-1", name: "ëŠ‘ëŒ€", r: 3, c: 12 },
{ s: "7-1", name: "ëŠ‘ëŒ€", r: 5, c: 12 },
{ s: "7-1", name: "ëŠ‘ëŒ€", r: 1, c: 12 },
{ s: "7-1", name: "ëŠ‘ëŒ€", r: 7, c: 12 },
{ s: "7-2", name: "ê³ ë¸”ë¦°", r: 1, c: 11 },
{ s: "7-2", name: "ê³ ë¸”ë¦°", r: 3, c: 11 },
{ s: "7-2", name: "ê³ ë¸”ë¦°", r: 5, c: 11 },
{ s: "7-2", name: "ê³ ë¸”ë¦°", r: 7, c: 11 },
{ s: "7-2", name: "ê³ ë¸”ë¦°", r: 0, c: 11 },
{ s: "7-2", name: "ê³ ë¸”ë¦°", r: 8, c: 11 },
{ s: "7-2", name: "ë²„ì„¯ëŒì´", r: 4, c: 13 },
{ s: "7-3", name: "ë‹¤í¬ì—˜í”„", r: 3, c: 11 },
{ s: "7-3", name: "ë‹¤í¬ì—˜í”„", r: 5, c: 11 },
{ s: "7-3", name: "ë„ì ", r: 4, c: 13 },
{ s: "7-3", name: "ë„ì ", r: 2, c: 13 },
{ s: "7-3", name: "ë„ì ", r: 6, c: 13 },
{ s: "7-4", name: "ê³°", r: 2, c: 11 },
{ s: "7-4", name: "ê³°", r: 6, c: 11 },
{ s: "7-4", name: "ê³°", r: 4, c: 11 },
{ s: "7-4", name: "ì¥", r: 3, c: 10 },
{ s: "7-4", name: "ì¥", r: 5, c: 10 },
{ s: "7-4", name: "ë²„ì„¯ëŒì´", r: 4, c: 13 },
{ s: "7-5", name: "ì„œíë²„ìŠ¤", r: 4, c: 12 },
{ s: "7-5", name: "ë‹¤í¬ì—˜í”„", r: 2, c: 11 },
{ s: "7-5", name: "ë‹¤í¬ì—˜í”„", r: 6, c: 11 },
{ s: "7-5", name: "ëŠ‘ëŒ€", r: 3, c: 11 },
{ s: "7-5", name: "ëŠ‘ëŒ€", r: 5, c: 11 },
{ s: "7-6", name: "ë„ì ", r: 1, c: 14 },
{ s: "7-6", name: "ë„ì ", r: 7, c: 14 },
{ s: "7-6", name: "ë„ì ", r: 3, c: 14 },
{ s: "7-6", name: "ë„ì ", r: 5, c: 14 },
{ s: "7-6", name: "ì˜¤ìš°ê±°", r: 4, c: 11 },
{ s: "7-7", name: "ëŠ‘ëŒ€", r: 2, c: 11 },
{ s: "7-7", name: "ëŠ‘ëŒ€", r: 4, c: 11 },
{ s: "7-7", name: "ëŠ‘ëŒ€", r: 6, c: 11 },
{ s: "7-7", name: "ëŠ‘ëŒ€", r: 0, c: 11 },
{ s: "7-7", name: "ëŠ‘ëŒ€", r: 8, c: 11 },
{ s: "7-7", name: "ëŠ‘ëŒ€", r: 3, c: 12 },
{ s: "7-7", name: "ëŠ‘ëŒ€", r: 5, c: 12 },
{ s: "7-8", name: "ë‹¤í¬ì—˜í”„", r: 4, c: 11 },
{ s: "7-8", name: "ì •ë ¹(ë¬¼)", r: 2, c: 12 },
{ s: "7-8", name: "ì •ë ¹(ë¬¼)", r: 6, c: 12 },
{ s: "7-8", name: "ê³°", r: 3, c: 11 },
{ s: "7-8", name: "ê³°", r: 5, c: 11 },
{ s: "7-9", name: "ê³°", r: 3, c: 11 },
{ s: "7-9", name: "ê³°", r: 5, c: 11 },
{ s: "7-9", name: "ê³°", r: 1, c: 11 },
{ s: "7-9", name: "ê³°", r: 7, c: 11 },
{ s: "7-9", name: "ì„œíë²„ìŠ¤", r: 4, c: 13 },
{ s: "7-10", name: "ê³ ëŒ€ì—”íŠ¸", r: 4, c: 12 },
{ s: "7-10", name: "ë²„ì„¯ëŒì´", r: 2, c: 14 },
{ s: "7-10", name: "ë²„ì„¯ëŒì´", r: 6, c: 14 },
{ s: "7-10", name: "ëŠ‘ëŒ€", r: 3, c: 12 },
{ s: "7-10", name: "ëŠ‘ëŒ€", r: 5, c: 12 },
{ s: "7-10", name: "ëŠ‘ëŒ€", r: 1, c: 12 },
{ s: "7-10", name: "ëŠ‘ëŒ€", r: 7, c: 12 },
{ s: "8-1", name: "ì •ë ¹(ë¬¼)", r: 4, c: 12 },
{ s: "8-1", name: "ëŒê²Œ", r: 3, c: 11 },
{ s: "8-1", name: "ëŒê²Œ", r: 5, c: 11 },
{ s: "8-1", name: "ëŒê²Œ", r: 1, c: 11 },
{ s: "8-1", name: "ëŒê²Œ", r: 7, c: 11 },
{ s: "8-2", name: "ê±°ë¯¸", r: 1, c: 12 },
{ s: "8-2", name: "ê±°ë¯¸", r: 3, c: 12 },
{ s: "8-2", name: "ê±°ë¯¸", r: 5, c: 12 },
{ s: "8-2", name: "ê±°ë¯¸", r: 7, c: 12 },
{ s: "8-2", name: "ê±°ë¯¸", r: 0, c: 12 },
{ s: "8-2", name: "ê±°ë¯¸", r: 8, c: 12 },
{ s: "8-2", name: "ë°•ì¥", r: 4, c: 13 },
{ s: "8-3", name: "ë¦¬ìë“œë§¨", r: 4, c: 12 },
{ s: "8-3", name: "ë¦¬ìë“œë§¨", r: 2, c: 12 },
{ s: "8-3", name: "ë¦¬ìë“œë§¨", r: 6, c: 12 },
{ s: "8-3", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 3, c: 11 },
{ s: "8-3", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 5, c: 11 },
{ s: "8-4", name: "ì„œíë²„ìŠ¤", r: 2, c: 13 },
{ s: "8-4", name: "ì„œíë²„ìŠ¤", r: 6, c: 13 },
{ s: "8-4", name: "ì •ë ¹(ë¬¼)", r: 4, c: 12 },
{ s: "8-4", name: "ëŒê²Œ", r: 3, c: 11 },
{ s: "8-4", name: "ëŒê²Œ", r: 5, c: 11 },
{ s: "8-5", name: "ì˜¤ìš°ê±°", r: 3, c: 11 },
{ s: "8-5", name: "ì˜¤ìš°ê±°", r: 5, c: 11 },
{ s: "8-5", name: "ì˜¤ìš°ê±°", r: 1, c: 11 },
{ s: "8-5", name: "ì˜¤ìš°ê±°", r: 7, c: 11 },
{ s: "8-5", name: "ë‹¤í¬ì—˜í”„", r: 4, c: 12 },
{ s: "8-6", name: "ì •ë ¹(ë¬¼)", r: 3, c: 13 },
{ s: "8-6", name: "ì •ë ¹(ë¬¼)", r: 5, c: 13 },
{ s: "8-6", name: "ì •ë ¹(ë¬¼)", r: 1, c: 13 },
{ s: "8-6", name: "ì •ë ¹(ë¬¼)", r: 7, c: 13 },
{ s: "8-6", name: "ê³¨ë ˜", r: 4, c: 11 },
{ s: "8-7", name: "í‘ë§ˆë²•ì‚¬", r: 0, c: 14 },
{ s: "8-7", name: "í‘ë§ˆë²•ì‚¬", r: 4, c: 14 },
{ s: "8-7", name: "í‘ë§ˆë²•ì‚¬", r: 8, c: 14 },
{ s: "8-7", name: "í‘ë§ˆë²•ì‚¬", r: 2, c: 14 },
{ s: "8-7", name: "í‘ë§ˆë²•ì‚¬", r: 6, c: 14 },
{ s: "8-7", name: "ë©§ë¼ì§€", r: 4, c: 11 },
{ s: "8-8", name: "í¬ë¼ì¼„", r: 3, c: 12 },
{ s: "8-8", name: "í¬ë¼ì¼„", r: 5, c: 12 },
{ s: "8-8", name: "ì¢€ë¹„", r: 4, c: 10 },
{ s: "8-8", name: "ì¢€ë¹„", r: 2, c: 10 },
{ s: "8-8", name: "ì¢€ë¹„", r: 6, c: 10 },
{ s: "8-9", name: "íŠ¸ë¡¤", r: 3, c: 11 },
{ s: "8-9", name: "íŠ¸ë¡¤", r: 5, c: 11 },
{ s: "8-9", name: "íŠ¸ë¡¤", r: 1, c: 11 },
{ s: "8-9", name: "íŠ¸ë¡¤", r: 7, c: 11 },
{ s: "8-9", name: "ì •ë ¹(ë¬¼)", r: 4, c: 13 },
{ s: "8-10", name: "ë“œë˜ê³¤", r: 4, c: 12 },
{ s: "8-10", name: "í¬ë¼ì¼„", r: 2, c: 13 },
{ s: "8-10", name: "í‘ë§ˆë²•ì‚¬", r: 6, c: 13 },
{ s: "8-10", name: "ë¦¬ìë“œë§¨", r: 3, c: 11 },
{ s: "8-10", name: "ë¦¬ìë“œë§¨", r: 5, c: 11 },
{ s: "9-1", name: "ì •ë ¹(ë¶ˆ)", r: 3, c: 12 },
{ s: "9-1", name: "ì •ë ¹(ë¶ˆ)", r: 5, c: 12 },
{ s: "9-1", name: "ì •ë ¹(ë¶ˆ)", r: 1, c: 12 },
{ s: "9-1", name: "ì •ë ¹(ë¶ˆ)", r: 7, c: 12 },
{ s: "9-1", name: "ì •ë ¹(ë¬¼)", r: 0, c: 12 },
{ s: "9-1", name: "ì •ë ¹(ë¬¼)", r: 8, c: 12 },
{ s: "9-1", name: "ê³¨ë ˜", r: 4, c: 11 },
{ s: "9-2", name: "í•˜í”¼", r: 0, c: 13 },
{ s: "9-2", name: "í•˜í”¼", r: 2, c: 13 },
{ s: "9-2", name: "í•˜í”¼", r: 4, c: 13 },
{ s: "9-2", name: "í•˜í”¼", r: 6, c: 13 },
{ s: "9-2", name: "í•˜í”¼", r: 8, c: 13 },
{ s: "9-2", name: "ë„ì ", r: 3, c: 14 },
{ s: "9-2", name: "ë„ì ", r: 5, c: 14 },
{ s: "9-3", name: "ì„œíë²„ìŠ¤", r: 3, c: 13 },
{ s: "9-3", name: "ì„œíë²„ìŠ¤", r: 5, c: 13 },
{ s: "9-3", name: "ì„œíë²„ìŠ¤", r: 1, c: 13 },
{ s: "9-3", name: "ì„œíë²„ìŠ¤", r: 7, c: 13 },
{ s: "9-3", name: "ì˜¤ìš°ê±°", r: 4, c: 11 },
{ s: "9-4", name: "ë‹¤í¬ì—˜í”„", r: 2, c: 11 },
{ s: "9-4", name: "ë‹¤í¬ì—˜í”„", r: 6, c: 11 },
{ s: "9-4", name: "ë‹¤í¬ì—˜í”„", r: 0, c: 11 },
{ s: "9-4", name: "ë‹¤í¬ì—˜í”„", r: 8, c: 11 },
{ s: "9-4", name: "í‘ë§ˆë²•ì‚¬", r: 4, c: 13 },
{ s: "9-5", name: "ë°ìŠ¤ë‚˜ì´íŠ¸", r: 4, c: 12 },
{ s: "9-5", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 3, c: 11 },
{ s: "9-5", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 5, c: 11 },
{ s: "9-5", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 1, c: 11 },
{ s: "9-5", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 7, c: 11 },
{ s: "9-6", name: "ì •ë ¹(ë¶ˆ)", r: 2, c: 12 },
{ s: "9-6", name: "ì •ë ¹(ë¶ˆ)", r: 4, c: 12 },
{ s: "9-6", name: "ì •ë ¹(ë¶ˆ)", r: 6, c: 12 },
{ s: "9-6", name: "ì •ë ¹(ë¶ˆ)", r: 0, c: 12 },
{ s: "9-6", name: "ì •ë ¹(ë¶ˆ)", r: 8, c: 12 },
{ s: "9-6", name: "ì˜¤í¬", r: 3, c: 11 },
{ s: "9-6", name: "ì˜¤í¬", r: 5, c: 11 },
{ s: "9-7", name: "ì •ë ¹(ë¬¼)", r: 2, c: 12 },
{ s: "9-7", name: "ì •ë ¹(ë¬¼)", r: 4, c: 12 },
{ s: "9-7", name: "ì •ë ¹(ë¬¼)", r: 6, c: 12 },
{ s: "9-7", name: "ì •ë ¹(ë¬¼)", r: 0, c: 12 },
{ s: "9-7", name: "ì •ë ¹(ë¬¼)", r: 8, c: 12 },
{ s: "9-7", name: "ëŒê²Œ", r: 3, c: 11 },
{ s: "9-7", name: "ëŒê²Œ", r: 5, c: 11 },
{ s: "9-8", name: "ì²œì‚¬ë³‘ì¥", r: 3, c: 12 },
{ s: "9-8", name: "ì²œì‚¬ë³‘ì¥", r: 5, c: 12 },
{ s: "9-8", name: "ë²„ì„¯ëŒì´", r: 4, c: 14 },
{ s: "9-8", name: "ë²„ì„¯ëŒì´", r: 2, c: 14 },
{ s: "9-8", name: "ë²„ì„¯ëŒì´", r: 6, c: 14 },
{ s: "9-9", name: "ì§€ì˜¥ì‚¬ëƒ¥ê°œ", r: 4, c: 12 },
{ s: "9-9", name: "ì§€ì˜¥ì‚¬ëƒ¥ê°œ", r: 2, c: 12 },
{ s: "9-9", name: "ì§€ì˜¥ì‚¬ëƒ¥ê°œ", r: 6, c: 12 },
{ s: "9-9", name: "ì„œíë²„ìŠ¤", r: 3, c: 13 },
{ s: "9-9", name: "ë‹¤í¬ì—˜í”„", r: 5, c: 13 },
{ s: "9-10", name: "ë¦¬ì¹˜ì™•", r: 4, c: 12 },
{ s: "9-10", name: "ë°ìŠ¤ë‚˜ì´íŠ¸", r: 2, c: 13 },
{ s: "9-10", name: "ë°ìŠ¤ë‚˜ì´íŠ¸", r: 6, c: 13 },
{ s: "9-10", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 3, c: 11 },
{ s: "9-10", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 5, c: 11 },
{ s: "9-10", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 1, c: 11 },
{ s: "9-10", name: "ìŠ¤ì¼ˆë ˆí†¤", r: 7, c: 11 },
{ s: "10-1", name: "ì˜¤ìš°ê±°", r: 2, c: 11 },
{ s: "10-1", name: "ì˜¤ìš°ê±°", r: 6, c: 11 },
{ s: "10-1", name: "ì˜¤ìš°ê±°", r: 0, c: 11 },
{ s: "10-1", name: "ì˜¤ìš°ê±°", r: 8, c: 11 },
{ s: "10-1", name: "í‘ë§ˆë²•ì‚¬", r: 4, c: 13 },
{ s: "10-2", name: "ë‹¤í¬ì—˜í”„", r: 3, c: 12 },
{ s: "10-2", name: "ë‹¤í¬ì—˜í”„", r: 5, c: 12 },
{ s: "10-2", name: "ë‹¤í¬ì—˜í”„", r: 1, c: 12 },
{ s: "10-2", name: "ë‹¤í¬ì—˜í”„", r: 7, c: 12 },
{ s: "10-2", name: "ì¥", r: 2, c: 11 },
{ s: "10-2", name: "ì¥", r: 4, c: 11 },
{ s: "10-2", name: "ì¥", r: 6, c: 11 },
{ s: "10-3", name: "ë“œë˜ê³¤", r: 4, c: 12 },
{ s: "10-3", name: "ë“œë˜ê³¤", r: 2, c: 12 },
{ s: "10-3", name: "ë“œë˜ê³¤", r: 6, c: 12 },
{ s: "10-3", name: "ë¦¬ì¹˜ì™•", r: 0, c: 13 },
{ s: "10-3", name: "ë¦¬ì¹˜ì™•", r: 8, c: 13 },
{ s: "10-4", name: "ì§€ì˜¥ì‚¬ëƒ¥ê°œ", r: 4, c: 12 },
{ s: "10-4", name: "ì§€ì˜¥ì‚¬ëƒ¥ê°œ", r: 2, c: 12 },
{ s: "10-4", name: "ì§€ì˜¥ì‚¬ëƒ¥ê°œ", r: 6, c: 12 },
{ s: "10-4", name: "ì¢€ë¹„", r: 3, c: 11 },
{ s: "10-4", name: "ì¢€ë¹„", r: 5, c: 11 },
{ s: "10-4", name: "ì¢€ë¹„", r: 1, c: 11 },
{ s: "10-4", name: "ì¢€ë¹„", r: 7, c: 11 },
{ s: "10-5", name: "íŠ¸ë¡¤", r: 2, c: 11 },
{ s: "10-5", name: "íŠ¸ë¡¤", r: 4, c: 11 },
{ s: "10-5", name: "íŠ¸ë¡¤", r: 6, c: 11 },
{ s: "10-5", name: "íŠ¸ë¡¤", r: 0, c: 11 },
{ s: "10-5", name: "íŠ¸ë¡¤", r: 8, c: 11 },
{ s: "10-6", name: "ì„œíë²„ìŠ¤", r: 2, c: 13 },
{ s: "10-6", name: "ì„œíë²„ìŠ¤", r: 4, c: 13 },
{ s: "10-6", name: "ì„œíë²„ìŠ¤", r: 6, c: 13 },
{ s: "10-6", name: "ì„œíë²„ìŠ¤", r: 0, c: 13 },
{ s: "10-6", name: "ì„œíë²„ìŠ¤", r: 8, c: 13 },
{ s: "10-7", name: "ì •ë ¹(ë¶ˆ)", r: 2, c: 12 },
{ s: "10-7", name: "ì •ë ¹(ë¬¼)", r: 4, c: 12 },
{ s: "10-7", name: "í‘ë§ˆë²•ì‚¬", r: 6, c: 12 },
{ s: "10-7", name: "ì •ë ¹(ë¶ˆ)", r: 0, c: 12 },
{ s: "10-7", name: "ì •ë ¹(ë¬¼)", r: 8, c: 12 },
{ s: "10-8", name: "ë“œë˜ê³¤", r: 2, c: 12 },
{ s: "10-8", name: "ì •ë ¹(ë¶ˆ)", r: 4, c: 12 },
{ s: "10-8", name: "ì •ë ¹(ë¶ˆ)", r: 6, c: 12 },
{ s: "10-8", name: "ì •ë ¹(ë¶ˆ)", r: 0, c: 12 },
{ s: "10-8", name: "ë“œë˜ê³¤", r: 8, c: 12 },
{ s: "10-9", name: "ë¦¬ì¹˜ì™•", r: 2, c: 12 },
{ s: "10-9", name: "ë“œë˜ê³¤", r: 4, c: 12 },
{ s: "10-9", name: "ë¦¬ì¹˜ì™•", r: 6, c: 12 },
{ s: "10-9", name: "ë°ìŠ¤ë‚˜ì´íŠ¸", r: 0, c: 11 },
{ s: "10-9", name: "ë°ìŠ¤ë‚˜ì´íŠ¸", r: 8, c: 11 },
{ s: "10-10", name: "ë§ˆì™•", r: 4, c: 12 },
{ s: "10-10", name: "ì„œíë²„ìŠ¤", r: 2, c: 13 },
{ s: "10-10", name: "ë‹¤í¬ì—˜í”„", r: 6, c: 13 },
{ s: "10-10", name: "ì •ë ¹(ë¬¼)", r: 4, c: 14 },
{ s: "10-10", name: "ì²œì‚¬ë³‘ì¥", r: 0, c: 11 },
{ s: "10-10", name: "ì²œì‚¬ë³‘ì¥", r: 8, c: 11 }

    ];

    // [ìë™ ë³€í™˜ê¸°] ìœ„ ë°ì´í„°ë¥¼ ê²Œì„ì´ ì´í•´í•  ìˆ˜ ìˆê²Œ ì •ë¦¬ (ìˆ˜ì • X)
    const STAGE_DATA = {};
    flatStageData.forEach(e => {
        if(!STAGE_DATA[e.s]) STAGE_DATA[e.s] = [];
        STAGE_DATA[e.s].push({ name: e.name, r: e.r, c: e.c });
    });

    // [3] ì  ìƒì„± í•¨ìˆ˜ (ìˆ˜ì •ëœ ë²„ì „)
    let enemySetup = [];
    function generateEnemies(ch, st) {
        enemySetup = []; 
        const key = `${ch}-${st}`;
        const stageInfo = STAGE_DATA[key];

        if (stageInfo) {
            stageInfo.forEach(entry => {
                const mobProto = monsterData.find(m => m.name === entry.name);
                if (mobProto) {
                    // ì¢Œí‘œ ê²¹ì¹¨ ë°©ì§€í•˜ë©° ë°°ì¹˜
                    if(!enemySetup.some(e=>e.r===entry.r && e.c===entry.c)) { 
                        placeUnit(mobProto.name, entry.r, entry.c, 'B', true); 
                        enemySetup.push({proto:mobProto, r:entry.r, c:entry.c}); 
                    }
                } else {
                    console.error(`ëª¬ìŠ¤í„° ì´ë¦„ ì˜¤ë¥˜: ${entry.name} (monsterDataì— ì—†ìŒ)`);
                }
            });
        } else {
            console.log(`ë°ì´í„° ì—†ëŠ” ìŠ¤í…Œì´ì§€: ${key}`);
        }
    }
    // --- Battle Logic ---
    function startBattleEngine() {
        if(loop)return;
        document.getElementById('btn-start-battle').disabled=true;
        document.getElementById('btn-auto-deploy').disabled=true;
        battleUnits=[]; let uid=0;
        deployed.forEach(d=>{
            const p=HERO_DB[d.name], i=playerData.inventory[d.name], m=Math.pow(1.2,i.awaken), max=Math.floor(p.hp*m);
            battleUnits.push(createBU(p,uid++,'A',d.r,d.c,i.curHp,max,m));
        });
        enemySetup.forEach(e=>{
            const m=1+(battleInfo.ch*0.1)+(battleInfo.st*0.05);
            const max=Math.floor(e.proto.hp*m);
            battleUnits.push(createBU(e.proto,uid++,'B',e.r,e.c,max,max,m));
        });
        loop=setInterval(gameLoop,30);
    }
    function createBU(p,id,s,r,c,hp,mhp,mult) {
        return {
            ...p, id, side:s, r, c, curHp:hp, curMhp:mhp,
            curAtk:Math.floor(p.atk*mult), curDef:Math.floor(p.def*mult), curSpd:p.spd,
            atb:0, skillT:0, shield:0, visualId:`${s}-${r}-${c}`, dmgDone:0, healDone:0, statuses:[]
        };
    }
function gameLoop() {
        const alive = battleUnits.filter(u => u.curHp > 0);
        
        // [ìŠ¹íŒ¨ ì²´í¬]
        if(!alive.some(u=>u.side==='A')){ finishGame(false); return; }
        if(!alive.some(u=>u.side==='B')){ finishGame(true); return; }

        // 1. ì‚´ì•„ìˆëŠ” ìœ ë‹›ë“¤ë§Œ í–‰ë™(ë¡œì§) ì²˜ë¦¬
        alive.forEach(u => {
            // Status Effect Tick
            processStatuses(u);
            if(u.statuses.some(st => st.type === 51)) return; // Stun check

            u.skillT = Math.min(u.cd, u.skillT + 0.03);
            u.atb += getStat(u, 'spd') * 0.03 * 0.8;
            if (u.atb >= 100) {
                u.atb = 0;
                act(u, alive);
            }
        });

        // 2. [ìˆ˜ì •] ëª¨ë“  ìœ ë‹›(ì£½ì€ ìœ ë‹› í¬í•¨) í™”ë©´ ê°±ì‹ 
        // ì´ë ‡ê²Œ í•´ì•¼ ë°©ê¸ˆ ì£½ì€ ìœ ë‹›ë„ updateDOMì´ í˜¸ì¶œë˜ì–´ .dead í´ë˜ìŠ¤ê°€ ë¶™ìŠµë‹ˆë‹¤.
        battleUnits.forEach(u => updateDOM(u));

        updateMeters();
    }    function processStatuses(u) {
        u.statuses.forEach(s=>{
            s.dur -= 0.03;
            if(s.type===52 || s.type===53) { // DoT
                const dmg=s.val*0.03; 
                u.curHp-=dmg;
            }
        });
        u.statuses = u.statuses.filter(s=>s.dur>0);
    }
    function getStat(u, type) {
        let base = u[`cur${type.charAt(0).toUpperCase()+type.slice(1)}`]; // curAtk, curDef, curSpd
        u.statuses.forEach(s=>{
            if(type==='atk' && s.type===41) base *= s.val;
            if(type==='def' && s.type===42) base *= s.val;
            if(type==='spd' && s.type===43) base *= s.val;
        });
        return base;
    }
    function act(u, alive) {
        // [AI Logic]
        let target=null, isHeal=(u.s1.type===2||u.s1.type===3||u.s1.type===6), canCast=(u.skillT>=u.cd);
        
        // Taunt check
        const taunters = alive.filter(e=>e.side!==u.side && e.statuses.some(s=>s.type===72));
        const enemies = taunters.length>0 ? taunters : alive.filter(e=>e.side!==u.side);

        if(canCast && isHeal) {
            // Heal/Buff: Target Ally
            const allies = alive.filter(e=>e.side===u.side);
            if(u.s1.target===2) target=u; // self
            else target = allies.sort((a,b)=>(a.curHp/a.curMhp)-(b.curHp/b.curMhp))[0];
        } else {
            // Attack: Target Enemy
            if(!enemies.length) return;
            target = enemies.sort((a,b)=>getDist(u,a)-getDist(u,b))[0];
        }

        if(getDist(u,target)<=u.range) {
            if(canCast) {
                u.skillT=0; 
                showBubble(u,u.skillName+"!"); 
                
                // Apply Skill
                let targets=[target];
                const allies=alive.filter(e=>e.side===u.side), foes=enemies;
                
                // Target Logic
                if(u.s1.target===10) targets = (u.s1.side===1?allies:foes);
                else if(u.s1.target===2) targets=[u];
                
                // í”ë“¤ë¦¼ íš¨ê³¼
                if(targets.length > 1 || u.s1.type === 51) triggerShake();

                targets.forEach(t=>applySkillEffect(u, t, u.s1));
            } else {
                // Normal Attack
                if(u.range===1) spawnFX(u,target,'slash'); else spawnProj(u,target,u.proj||'arrow');
                dealDmg(u,target,getStat(u,'atk'),false);
            }
        } else {
            moveToward(u,target,alive);
        }
    }
    function applySkillEffect(u, t, s) {
        if(s.type===1) dealDmg(u, t, getStat(u,'atk')*(s.val/100), true);
        else if(s.type===2) { const v=s.val; t.curHp=Math.min(t.curMhp,t.curHp+v); u.healDone+=v; showDmg(t,`+${v}`,'heal'); addStatusIcon(t,'buff'); }
        else if(s.type===3) { t.shield+=s.val; u.healDone+=s.val; showDmg(t,'Shield','heal'); addStatusIcon(t,'buff'); }
        else if(s.type===6) { t.statuses=t.statuses.filter(st=>![51,52,53,42].includes(st.type)); showDmg(t,'Cleanse','heal'); }
        else if(s.type===71) { t.atb=100; showDmg(t,'Turn+','buff'); }
        else { // Buffs/Debuffs (41~53, 72, 73)
            t.statuses.push({type:s.type, val:s.val, dur:s.dur});
            addStatusIcon(t, [51,52,53].includes(s.type)?'cc':(s.type>40?'buff':'buff'));
            if(s.type===51) showDmg(t,'Stun','skill');
        }
    }
    function moveToward(u,t,alive) {
        let dr=t.r-u.r, dc=t.c-u.c;
        let nr=u.r+Math.sign(dr), nc=u.c+Math.sign(dc);
        if(!alive.some(o=>o.r===nr && o.c===nc)) { u.r=nr; u.c=nc; }
    }
    function dealDmg(a,t,dmg,skill) {
        // Critical Chance
        let isCrit = !skill && Math.random() < 0.1; 
        if(isCrit) dmg *= 1.5;

        let def = getStat(t,'def');
        let val = Math.max(1, Math.floor(dmg - def*0.3));
        
        // Shield Logic
        if(t.shield>0) {
            if(t.shield>=val) { t.shield-=val; val=0; }
            else { val-=t.shield; t.shield=0; }
        }
        
        t.curHp-=val; a.dmgDone+=val;
        showDmg(t,val,skill?'skill':(isCrit?'crit':'normal'));
        
        if(isCrit) triggerShake();
    }
    function getDist(a,b){return Math.abs(a.r-b.r)+Math.abs(a.c-b.c);}
    
    // --- Visuals ---
    function updateDOM(u) {
        if(!u.el) { const c=document.getElementById('grid-container').children; for(let i=0;i<c.length;i++)if(c[i].dataset.id===u.visualId)u.el=c[i]; }
        if(u.el) {
const speed = u.mspd || 1; 
            const moveTime = 0.3 / speed; 
            u.el.style.transition = `left ${moveTime}s ease-out, top ${moveTime}s ease-out`;
            if(u.curHp<=0) { u.el.classList.add('dead'); return; }
            u.el.style.left=(u.c*34*1.5+30)+'px'; u.el.style.top=(u.r*58.9+(u.c%2?29.45:0)+25)+'px'; u.el.style.zIndex=u.r*10+10;
            
            // HP Bar Animation
            u.el.querySelector('.hp-fill').style.width = Math.max(0, u.curHp/u.curMhp*100)+'%';
            u.el.querySelector('.hp-damage-buffer').style.width = Math.max(0, u.curHp/u.curMhp*100)+'%'; // follow with delay via css
            
            // Shield Bar (Blue)
            const shW = Math.min(100, u.shield/u.curMhp*100);
            const hpW = Math.max(0, u.curHp/u.curMhp*100);
            u.el.querySelector('.shield-fill').style.width = shW+'%';
            u.el.querySelector('.shield-fill').style.left = hpW+'%'; // attach to right of hp
            
            u.el.querySelector('.skill-fill').style.width = (u.skillT/u.cd)*100+'%';
        }
    }
    function addStatusIcon(u,type) {
        if(!u.el) return;
        const row=u.el.querySelector('.status-row'), i=document.createElement('div');
        i.className=`st-icon st-${type}`; i.innerText=type==='cc'?'ğŸ’«':(type==='buff'?'â–²':'â–¼');
        row.appendChild(i); setTimeout(()=>i.remove(),2000);
    }
    function triggerShake(){ const c=document.getElementById('grid-container'); c.classList.remove('shake'); void c.offsetWidth; c.classList.add('shake'); }
    function spawnProj(a,t,type) { 
        if(!a.el||!t.el)return; const fx=document.getElementById('fx-layer'), p=document.createElement('div');
        p.className=`projectile proj-${type}`;
        const x1=parseInt(a.el.style.left)+22, y1=parseInt(a.el.style.top)+22, x2=parseInt(t.el.style.left)+22, y2=parseInt(t.el.style.top)+22;
        p.style.left=x1+'px'; p.style.top=y1+'px'; p.style.transform=`rotate(${Math.atan2(y2-y1,x2-x1)}rad)`;
        fx.appendChild(p); setTimeout(()=>{p.style.transition='all 0.2s linear';p.style.left=x2+'px';p.style.top=y2+'px';},10); setTimeout(()=>p.remove(),250);
    }
    function spawnFX(u,t,type) { if(!t.el)return; const f=document.createElement('div'); f.className=`fx-${type}`; f.style.left=(parseInt(t.el.style.left))+'px'; f.style.top=(parseInt(t.el.style.top))+'px'; document.getElementById('fx-layer').appendChild(f); setTimeout(()=>f.remove(),200); }
    function showDmg(t,v,type) { if(!t.el)return; const d=document.createElement('div'); d.className=`dmg-text ${type==='heal'?'heal-text':(type==='skill'?'dmg-skill':(type==='crit'?'crit':'dmg-normal'))}`; d.innerText=v; d.style.left='0'; d.style.top='-20px'; t.el.appendChild(d); setTimeout(()=>d.remove(),800); }
    function showBubble(u,t) { if(!u.el)return; const b=document.createElement('div'); b.className='speech-bubble'; b.innerText=t; u.el.appendChild(b); setTimeout(()=>b.remove(),1500); }
    function updateMeters() {
        const l=[...battleUnits], dm=Math.max(1,...l.map(u=>u.dmgDone)), hm=Math.max(1,...l.map(u=>u.healDone));
        document.getElementById('rank-dmg').innerHTML=l.sort((a,b)=>b.dmgDone-a.dmgDone).slice(0,5).map(u=>`<div class="rank-row"><div style="width:50px;overflow:hidden;">${u.name}</div><div class="rank-bar-bg"><div class="rb-d" style="width:${u.dmgDone/dm*100}%"></div></div><div class="rank-val">${Math.floor(u.dmgDone)}</div></div>`).join('');
        document.getElementById('rank-supp').innerHTML=l.sort((a,b)=>b.healDone-a.healDone).slice(0,5).map(u=>`<div class="rank-row"><div style="width:50px;overflow:hidden;">${u.name}</div><div class="rank-bar-bg"><div class="rb-h" style="width:${u.healDone/hm*100}%"></div></div><div class="rank-val">${Math.floor(u.healDone)}</div></div>`).join('');
    }

    // --- End Game ---
// --- End Game (ë³´ìƒ ë¡œì§ ìˆ˜ì •ë¨) ---
// --- End Game (ë³´ìƒ ë°¸ëŸ°ìŠ¤ ìˆ˜ì •: ì±•í„° x 105) ---
    function finishGame(win) {
        clearInterval(loop); loop=null;
        
        // ì•„êµ° ì²´ë ¥ ì €ì¥
        battleUnits.filter(u=>u.side==='A').forEach(u=>{ 
            if(playerData.inventory[u.name]) playerData.inventory[u.name].curHp=Math.max(0,u.curHp); 
        });

        // [ìˆ˜ì •] ìš”ì²­í•˜ì‹  ì±•í„° ê³„ìˆ˜ 105 ì ìš©
        // ê³µì‹: (ì±•í„° x 105) + (ìŠ¤í…Œì´ì§€ x 20)
        let baseReward = (battleInfo.ch * 105) + (battleInfo.st * 20);
        
        if(win) {
            const cur = battleInfo.ch * 100 + battleInfo.st;
            const sv = playerData.clearedChapter * 100 + playerData.clearedStage;
            const firstClear = cur > sv;
            
            // [ìŠ¹ë¦¬] ì´ˆíšŒ í´ë¦¬ì–´ëŠ” 3ë°°
            const reward = firstClear ? baseReward * 3 : baseReward;
            
            playerData.gems += reward;

            // ì§„ë„ ì—…ë°ì´íŠ¸
            if(firstClear) { 
                playerData.clearedStage = battleInfo.st; 
                if(playerData.clearedStage >= 10){ 
                    playerData.clearedChapter++; 
                    playerData.clearedStage = 0; 
                } 
            }
            saveData();

            // ê²°ê³¼ì°½ í‘œì‹œ
            document.getElementById('win-reward').innerText = `ë³´ìƒ: ğŸ’${reward} ${firstClear ? '(ì²« í´ë¦¬ì–´ ë³´ìƒ!)' : ''}`;
            document.getElementById('win-modal').style.display = 'flex';
        } else {
            // [íŒ¨ë°°] ê¸°ë³¸ ë³´ìƒì˜ 20% ì§€ê¸‰
            const defeatReward = Math.floor(baseReward * 0.2) || 10;
            playerData.gems += defeatReward;
            saveData();

            alert(`íŒ¨ë°°í–ˆìŠµë‹ˆë‹¤...\ní•˜ì§€ë§Œ ë…¸ë ¥ì˜ ëŒ€ê°€ë¡œ ğŸ’${defeatReward}ì„(ë¥¼) ì–»ì—ˆìŠµë‹ˆë‹¤.\n(ì²´ë ¥ì€ ì €ì¥ë¨)`); 
            quitBattle();
        }
    }
    function nextStage() { let {ch,st}=battleInfo; st++; if(st>10){st=1;ch++;} prepareBattle(ch,st); }
    function quitBattle() { if(loop){clearInterval(loop); battleUnits.filter(u=>u.side==='A').forEach(u=>{if(playerData.inventory[u.name])playerData.inventory[u.name].curHp=Math.max(0,u.curHp);}); saveData();} goToScreen('lobby'); }

    // --- Gacha ---
    function pullGacha(n) {
        // HERO_DBê°€ ë¹„ì–´ìˆìœ¼ë©´ ê°€ì±  ë¶ˆê°€
        if(Object.keys(HERO_DB).length === 0) return alert("ë°ì´í„°ê°€ ì—†ì–´ ì†Œí™˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        
        const c=n*100; if(playerData.gems<c) return alert("ë³´ì„ ë¶€ì¡±");
        playerData.gems-=c; updateCurrencyUI();
        const res=document.getElementById('gacha-results'); res.innerHTML="";
        for(let i=0;i<n;i++){
            const r=Math.random()*100; let g='apprentice', acc=0;
            for(let k in GACHA_RATES){ acc+=GACHA_RATES[k]; if(r<=acc){g=k;break;} }
            const pool=Object.values(HERO_DB).filter(u=>u.grade===g);
            if(pool.length === 0) continue; 
            const pick=pool[Math.floor(Math.random()*pool.length)].name;
            if(!playerData.inventory[pick]) playerData.inventory[pick]={count:0,awaken:0,curHp:HERO_DB[pick].hp};
            playerData.inventory[pick].count++;
            const d=document.createElement('div'); d.className=`gacha-card grade-${g}`;
            d.innerHTML=`<div>${HERO_DB[pick].icon}</div><div style="font-size:10px;">${pick}</div>`;
            res.appendChild(d);
        }
        saveData();
    }
    function renderLibrary() {
        const g=document.getElementById('lib-grid'); g.innerHTML="";
        Object.values(HERO_DB).forEach(d=>{
            const h=playerData.inventory[d.name], c=document.createElement('div'); c.className=`inv-card grade-${d.grade}`;
            if(!h){c.style.opacity=0.3;c.style.filter='grayscale(1)';}
            c.innerHTML=`<div style="font-size:30px">${d.icon}</div><div style="font-size:12px;font-weight:bold;">${d.name}</div>`;
            g.appendChild(c);
        });
    }

    loadData();
</script>
</body>
</html>