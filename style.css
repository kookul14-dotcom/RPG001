@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap');

:root {
    --gold: #ffd700;
    --panel-bg: rgba(25, 25, 30, 0.95);
    --item-bg: #151515;
    --border-dim: #333;
    --font-main: 'Noto Sans KR', sans-serif;
    --font-game: 'Orbitron', sans-serif; /* 게이밍 폰트 */
}
/* =========================================
   GLOBAL & RESET
   ========================================= */
* { box-sizing: border-box; }
body { 
    margin: 0; padding: 0; overflow: hidden; 
    background: #050505; color: #ddd; 
    font-family: 'Segoe UI', 'Malgun Gothic', sans-serif; user-select: none; 
}

/* =========================================
   CURSORS
   ========================================= */
#viewport {
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" filter="drop-shadow(2px 2px 2px rgba(0,0,0,0.5))"><path d="M2 2 L12 22 L15 13 L24 10 L2 2 Z" fill="%23eee" stroke="%23222" stroke-width="1.5"/></svg>') 0 0, auto;
}
#viewport.cursor-attack {
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" filter="drop-shadow(2px 2px 2px rgba(255,0,0,0.4))"><path d="M24 4l4 4-2 2 2 2-2 2-2-2-2 2 2 2-12 12-4-4 12-12 2 2-2-2 2-2-2-2 2-2z" fill="%23ffcccc" stroke="%23800" stroke-width="1.5"/><path d="M6 26l-4 4 4-4-2-2z" fill="%23500"/></svg>') 2 28, crosshair !important;
}
#viewport.cursor-skill { cursor: crosshair !important; }
#viewport.cursor-move { cursor: grabbing !important; }

/* =========================================
   SCENE & LAYOUT
   ========================================= */
.scene { position: absolute; top:0; left:0; width:100vw; height:100vh; background:#111; display:none; z-index:10; }
.scene.active { display:flex; flex-direction:column; }

#scene-title { background: linear-gradient(135deg, #0f0c29, #302b63, #24243e); align-items:center; justify-content:center; cursor:pointer; }
.game-title { font-size:80px; color:gold; text-shadow:0 0 20px rgba(255,215,0,0.5); margin:0; }
.click-start { font-size:24px; color:#aaa; margin-top:20px; animation:blink 1.5s infinite; }
@keyframes blink { 50% { opacity:0.5; } }

#scene-town { background: radial-gradient(circle at center, #222, #000); }
.town-header { height:60px; background:rgba(0,0,0,0.8); border-bottom:2px solid #444; display:flex; justify-content:space-between; align-items:center; padding:0 40px; }
.town-name { font-size:24px; font-weight:bold; color:#eba; }
.resource-display { font-size:18px; display:flex; gap:20px; }
.town-content { flex:1; display:flex; align-items:center; justify-content:center; }
.town-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important;
    gap: 30px !important;
    width: 90% !important;
    max-width: 1200px !important;
    margin: auto;
}
.town-btn {
    height: 180px !important; /* 높이 대폭 확대 */
    background: linear-gradient(135deg, #222, #0d0d0d) !important;
    border: 1px dashed #555 !important;
    border-radius: 12px !important;
    font-family: var(--font-game) !important;
    transition: 0.3s all !important;
    position: relative;
    overflow: hidden;
}

.town-btn:hover {
    border: 1px solid var(--gold) !important;
    transform: translateY(-10px) !important;
    box-shadow: 0 15px 30px rgba(255, 215, 0, 0.15) !important;
}

.town-btn .btn-icon {
    font-size: 60px !important; /* 아이콘 대폭 확대 */
    margin-bottom: 15px !important;
    filter: drop-shadow(0 0 10px rgba(255,215,0,0.3));
}

.town-btn .btn-text {
    font-size: 20px !important;
    letter-spacing: 2px;
    color: #eee;
}
.town-btn.danger { border-color:#844; color:#f88; }
.town-btn.danger:hover { background:#422; border-color:#f55; }

.sub-header { height:60px; background:#222; border-bottom:1px solid #444; display:flex; justify-content:space-between; align-items:center; padding:0 30px; }
.close-btn { padding:8px 20px; background:#522; color:white; border:1px solid #744; cursor:pointer; border-radius:4px; }
.close-btn:hover { background:#733; }
.sub-content { flex:1; padding:30px; overflow-y:auto; display:flex; flex-direction:column; gap:10px; align-items:center; }

.chapter-list { padding:15px; background:#151515; display:flex; gap:10px; overflow-x:auto; }
.chapter-btn { padding:10px 20px; background:#333; border:1px solid #555; color:#aaa; cursor:pointer; border-radius:4px; }
.chapter-btn.active { background:#554; color:gold; border-color:gold; }
.stage-list { padding:30px; display:grid; grid-template-columns:repeat(auto-fill, minmax(150px, 1fr)); gap:20px; width:100%; box-sizing:border-box; }
.stage-btn { height:100px; background:#222; border:2px solid #444; border-radius:8px; display:flex; flex-direction:column; align-items:center; justify-content:center; cursor:pointer; }
.stage-btn:hover { border-color:#888; background:#2a2a2a; }
.stage-btn.locked { opacity:0.3; pointer-events:none; filter:grayscale(1); }

/* =========================================
   BATTLE UI
   ========================================= */
#game-frame { display:grid; grid-template-columns:260px 1fr 280px; grid-template-rows:1fr 280px; width:100%; height:100%; background:#111; }
.panel { background:#151515; border:1px solid #333; box-shadow:inset 0 0 20px rgba(0,0,0,0.8); display:flex; flex-direction:column; position:relative; overflow:hidden; }
.panel-header { background:linear-gradient(to bottom, #2a2a2a, #111); padding:6px; text-align:center; font-weight:bold; border-bottom:2px solid #444; color:#eba; font-size:13px; flex-shrink: 0; }

#sidebar-left { grid-column:1; grid-row:1/3; border-right:2px solid #444; z-index:20; }
#sidebar-right { grid-column:3; grid-row:1/3; border-left:2px solid #444; z-index:20; display: flex; flex-direction: column; }
#log-box { flex: 1; overflow-y: auto; font-size: 12px; }
#log-content { padding: 5px; }
#log-footer { flex-shrink: 0; padding: 8px; border-top: 1px solid #444; background: #111; }

#viewport { grid-column:2; grid-row:1; position:relative; overflow:hidden; background:#080808; }
#bottom-panel { grid-column:2; grid-row:2; border-top:2px solid #444; z-index:20; display:grid; grid-template-columns:130px 140px 220px 160px 1fr; gap:0; }
canvas { display:block; }
#overlay-layer { position:absolute; top:0; left:0; width:0; height:0; pointer-events:none; }

.bp-col { padding:8px; border-right:1px solid #333; display:flex; flex-direction:column; overflow-y:auto; scrollbar-width:thin; }
.bp-header { font-size:11px; font-weight:bold; color:#888; border-bottom:1px solid #444; margin-bottom:6px; padding-bottom:2px; text-align:center; }

.col-profile { align-items:center; background:#1a1a1a; }
.portrait-lg { font-size:40px; background:#222; border-radius:50%; width:60px; height:60px; display:flex; align-items:center; justify-content:center; border:2px solid #666; margin-bottom:5px; }
.basic-name { font-weight:bold; color:gold; font-size:14px; margin-bottom:2px; }
.basic-lv { font-size:11px; color:#aaa; margin-bottom:5px; }

.col-base { background:#181818; }
.col-combat { background:#1a1a1a; }
.stat-row { display:grid; grid-template-columns:1fr 50px 15px; align-items:center; font-size:12px; margin-bottom:3px; height:18px; }
.stat-label { color:#999; cursor:help; }
.stat-val-box { display:flex; align-items:center; justify-content:flex-end; gap:4px; grid-column:2; }
.stat-val { font-weight:bold; color:#eee; text-align:right; width:100%; }
.stat-arrow { font-size:10px; color:#5f5; font-weight:bold; text-align:center; grid-column:3; margin-right:2px; }
.val-buff { color:#5f5 !important; }
.val-debuff { color:#f55 !important; }
.val-normal { color:#ddd; }

.stat-up-btn {
    background: #28a745 !important;
    border: 1px solid #1e7e34 !important;
    color: white !important;
    border-radius: 3px;
    width: 16px !important;
    height: 16px !important;
    font-size: 11px !important;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    flex-shrink: 0; /* 부모 너비가 좁아져도 버튼 크기 유지 */
}
.stat-up-btn:hover {
    background: #218838 !important;
    transform: scale(1.1);
    box-shadow: 0 0 10px rgba(40, 167, 69, 0.5);
}
.stat-up-btn.disabled { background:#444; border-color:#555; color:#888; cursor:not-allowed; }
.stat-up-btn:not(.disabled):hover { background:#5a5; }

.col-control { background:#111; display:flex; flex-direction:column; gap:4px; }
.skill-grid { display:grid; grid-template-columns:1fr 1fr; grid-template-rows:1fr 1fr; gap:4px; flex:1; }
.turn-btn-wrapper { height:40px; margin-top:4px; width:100%; }

.skill-btn { background:linear-gradient(to bottom, #2a2a2a, #1a1a1a); border:2px solid #444; border-radius:4px; color:#ccc; display:flex; flex-direction:column; align-items:center; justify-content:center; cursor:pointer; position:relative; height:100%; width:100%; transition:0.1s; }
.skill-btn:hover { border-color:#888; background:#333; }
.skill-btn.active { border-color:gold; box-shadow:0 0 8px rgba(255,215,0,0.4); }
.skill-btn.disabled { opacity:0.5; cursor:not-allowed; filter:grayscale(100%); }
.skill-btn.mana-lack { filter:grayscale(80%); opacity:0.7; }
.skill-icon { font-size:18px; margin-bottom:2px; }
.skill-name { font-weight:bold; font-size:10px; text-align:center; }
.skill-cost { color:#4af; font-size:9px; }
.cooldown-overlay { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:center; font-size:24px; font-weight:bold; color:#fff; z-index:5; text-shadow:0 0 5px black; }
.confirm-overlay { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:10; display:flex; flex-direction:column; justify-content:center; align-items:center; gap:3px; }
.confirm-btn, .cancel-btn { width:80%; font-size:10px; padding:4px; border-radius:3px; cursor:pointer; }
.confirm-btn { background:#252; color:#bfb; border:1px solid #484; }
.cancel-btn { background:#522; color:#fbb; border:1px solid #744; }

.turn-btn { width:100%; height:100%; background:#522; color:#eaa; border:2px solid #733; border-radius:6px; cursor:pointer; font-weight:bold; font-size:13px; display:flex; align-items:center; justify-content:center; }
.turn-btn:hover { background:#733; }

.col-status { background:#151515; }
.status-list { flex:1; display:flex; flex-direction:column; gap:4px; overflow-y:auto; }
.status-text-item { font-size:11px; color:#ccc; padding:4px 0; border-bottom:1px solid #222; }
.action-flags { margin-top:auto; padding-top:8px; border-top:1px solid #444; display:flex; gap:4px; justify-content:center; }
.flag-pill { padding:3px 8px; border-radius:4px; font-size:11px; background:#222; color:#555; border:1px solid #333; font-weight:bold; text-align:center; flex:1; }
.flag-pill.done { background:#444; color:#888; text-decoration:line-through; }
.flag-pill.available { background:#131; color:#bfb; border-color:#363; }

.bar-container { background:#111; height:6px; border-radius:3px; overflow:hidden; width:100%; margin-top:2px; position:relative; }
.bar-fill { height:100%; transition:width 0.3s; }
.hp-fill { background:#d33; } .mp-fill { background:#0ae; } .xp-fill { background:#ccc; } 
.bar-text { font-size:10px; color:#fff; text-align:center; position:absolute; top:-1px; width:100%; text-shadow:1px 1px 0 #000; line-height:1; }

.tooltip-box { position:fixed; background:rgba(15,15,20,0.98); border:1px solid gold; padding:10px; color:white; border-radius:6px; font-size:12px; pointer-events:none; z-index:2000; display:none; box-shadow:0 5px 15px rgba(0,0,0,0.8); max-width:250px; }
.tt-title { font-size:14px; font-weight:bold; color:#eba; border-bottom:1px solid #444; padding-bottom:3px; margin-bottom:5px; }
.tt-stat { color:#5f5; }
.floating-text { position:absolute; font-weight:bold; font-size:20px; pointer-events:none; z-index:500; text-shadow:2px 2px 0 #000; animation:floatUp 1.0s forwards; white-space: nowrap; }
@keyframes floatUp { 0% { transform:translateY(0); opacity:1; } 100% { transform:translateY(-40px); opacity:0; } }
.speech-bubble { position: absolute; background: white; color: black; padding: 4px 10px; border-radius: 12px; font-weight: bold; font-size: 12px; transform: translate(-50%, -100%); pointer-events: none; z-index: 600; white-space: nowrap; box-shadow: 0 2px 5px rgba(0,0,0,0.5); }
.speech-bubble::after { content: ''; position: absolute; bottom: -5px; left: 50%; transform: translateX(-50%); border-width: 5px 5px 0; border-style: solid; border-color: white transparent transparent transparent; }

.modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:100; display:none; align-items:center; justify-content:center; }
.modal-content { background:#1a1a1a; border:2px solid gold; padding:30px; text-align:center; border-radius:10px; min-width:300px; }
.modal-btns button { margin:10px; padding:10px 20px; font-size:16px; cursor:pointer; background:#333; color:white; border:1px solid #666; }
.modal-btns button:hover { background:#555; }
.modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:9999; display:flex; align-items:center; justify-content:center; }
.system-modal-box { background:#222; border:2px solid #666; padding:20px; border-radius:8px; min-width:300px; text-align:center; box-shadow:0 10px 30px rgba(0,0,0,0.8); }
.sys-msg { font-size:16px; color:#eee; margin-bottom:20px; white-space:pre-wrap; }
.sys-btns { display:flex; justify-content:center; gap:10px; }
.sys-btn { padding:8px 20px; background:#444; border:1px solid #666; color:white; cursor:pointer; border-radius:4px; font-weight:bold; }
.sys-btn:hover { background:#555; border-color:#888; }
.sys-btn.confirm { background:#252; border-color:#474; }
.sys-btn.confirm:hover { background:#363; }

/* 영웅 관리 그리드 */
.col-header { background:linear-gradient(90deg, #222, #111); padding:10px; font-size:14px; font-weight:bold; color:#eba; border-bottom:1px solid #444; text-align:center; text-transform:uppercase; letter-spacing:1px; }
.col-body { flex:1; padding:15px; overflow-y:auto; scrollbar-width:thin; }

.hero-list-item { display:flex; align-items:center; gap:10px; padding:10px; margin-bottom:8px; background:#1a1a1a; border:1px solid #333; border-radius:6px; cursor:pointer; transition:all 0.2s; position: relative; }
.hero-list-item:hover { background:#252525; border-color:#666; }
.hero-list-item.selected { background:linear-gradient(90deg, #2a2a2a, #222); border-color:gold; box-shadow:inset 3px 0 0 gold; }
.list-icon { font-size:24px; width:36px; height:36px; background:#111; border-radius:50%; display:flex; align-items:center; justify-content:center; border:1px solid #444; }
.list-info h4 { margin:0; font-size:13px; color:#ddd; }
.list-info span { font-size:11px; color:#888; }

/* [NEW] 레벨업 뱃지 (파티 리스트용) */
.lv-up-badge {
    position: absolute;
    top: 5px;
    right: 5px;
    background: gold;
    color: black;
    font-size: 10px;
    font-weight: bold;
    padding: 2px 4px;
    border-radius: 4px;
    box-shadow: 0 0 5px rgba(255, 215, 0, 0.8);
    animation: bounce 1s infinite;
}
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }

.hero-preview-area { display:flex; flex-direction:column; align-items:center; gap:20px; padding-top:10px; }
.hero-big-portrait { width:100px; height:100px; background:radial-gradient(circle, #333, #111); border:3px solid #555; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:60px; box-shadow:0 0 20px rgba(0,0,0,0.8); position:relative; }
.class-badge { position:absolute; bottom:0; right:0; background:#411; border:1px solid #f55; color:#fbb; font-size:10px; padding:2px 6px; border-radius:4px; font-weight:bold; }
.equipment-layout { display:grid; grid-template-columns:1fr 1fr; gap:15px; width:100%; }
.equip-group-title { grid-column:1/-1; font-size:12px; color:#888; text-align:center; margin-bottom:5px; border-bottom:1px solid #333; line-height:0.1em; margin:10px 0 10px; }
.equip-group-title span { background:rgba(20,20,25,0.95); padding:0 10px; }

.equip-slot-modern { 
    background:#080808; 
    border:1px dashed #444; 
    border-radius:6px; 
    padding:8px; 
    display:flex; align-items:center; gap:10px; 
    cursor:pointer; transition:0.2s; position:relative; 
}
.equip-slot-modern:hover { border-color:#888; background:#151515; }
.equip-slot-modern.filled { 
    border:1px solid #654; 
    background:linear-gradient(135deg, #222, #1a1a1a); 
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
}

.slot-bg-icon { 
    width:40px; height:40px; 
    background:transparent; 
    border-radius:4px; 
    display:flex; align-items:center; justify-content:center; 
    font-size:20px; color:#333; 
    opacity: 0.3; 
    filter: grayscale(100%);
}
.filled .slot-bg-icon { 
    border: 1px solid gold;
    background: #000;
    color:#fff; 
    text-shadow:0 0 5px gold; 
    opacity: 1; 
    filter: none;
}
.slot-info { flex:1; display:flex; flex-direction:column; overflow:hidden; }
.slot-name { font-size:12px; font-weight:bold; color:#555; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.slot-placeholder { font-size:10px; color:#444; }
.filled .slot-name { color:gold; }

.stat-panel-container {
    display: flex;
    gap: 10px;
    align-items: stretch;
    width: 100%;
}

.stat-panel {
    background: rgba(0,0,0,0.2);
    border-radius: 6px;
    border: 1px solid #444;
    flex: 1;
    min-width: 200px; /* [중요] 폭을 고정하여 화살표가 나와도 춤추지 않게 함 */
}

.stat-sub-header {
    font-family: var(--font-game);
    font-size: 11px;
    letter-spacing: 1px;
    color: #888;
    background: #222;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-bottom: 1px solid #333;
}

.stat-value-group {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-end !important;
    gap: 8px;           /* 숫자와 버튼 사이 간격 */
    white-space: nowrap; /* [핵심] 내부 텍스트 줄 바꿈 방지 */
    flex-wrap: nowrap;   /* [핵심] Flex 아이템 줄 바꿈 방지 */
    min-width: 85px;    /* 버튼이 생겨도 공간이 흔들리지 않도록 넉넉히 확보 */
}

/* 스탯 박스 전체의 정렬 유지 */
.stat-box {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between;
    height: 32px;
    padding: 0 12px !important;
}
.stat-label-group {
display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 12px; /* 수치와 버튼 사이 간격 고정 */
    min-width: 80px; /* 공간 확보로 줄맞춤 유지 */
}
/* 화살표 등장 시 텍스트를 밀지 않도록 공간 예약 */
.stat-preview-arrow {
    display: inline-block;
    width: 20px; /* 화살표가 없어도 20px 공간을 차지 */
    color: #0f0;
    font-weight: bold;
    text-align: center;
    font-size: 14px;
    animation: blinkArrow 0.8s infinite;
}
.stat-value-num {
    font-family: var(--font-game); /* Orbitron */
    font-size: 14px;
    color: #eee;
    text-align: right;
}
.stat-key {
    font-family: var(--font-main);
    font-size: 11px !important;
    font-weight: 700; /* 조금 더 두껍게 하여 가독성 확보 */
    color: #aaa;
    letter-spacing: -0.5px; /* 한국어 라벨이 너무 퍼지지 않게 조정 */
}
.stat-val, .stat-box span:last-child {
    font-family: var(--font-game);
    font-size: 13px;
    font-weight: 400;
    color: #eee;
}
.stat-bonus { color: #5f5; font-size: 11px; margin-left: 5px; }

@keyframes blinkArrow { 0% { opacity:0.2; } 50% { opacity:1; } 100% { opacity:0.2; } }

.dismiss-btn { margin-top:20px; width:100%; padding:8px; background:#311; border:1px solid #522; color:#d88; cursor:pointer; border-radius:4px; font-size:11px; }
.dismiss-btn:hover { background:#522; color:white; }


.hero-card-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(280px, 1fr)); gap:20px; width:100%; }
.hero-card { background:#222; border:1px solid #444; border-radius:8px; padding:15px; display:flex; flex-direction:column; gap:10px; }
.card-header { display:flex; align-items:center; gap:15px; border-bottom:1px solid #333; padding-bottom:10px; }
.card-icon { font-size:36px; background:#111; width:50px; height:50px; display:flex; align-items:center; justify-content:center; border-radius:50%; border:1px solid #555; }
.card-info h3 { margin:0; color:#eba; font-size:16px; }
.card-info p { margin:0; color:#888; font-size:12px; }
.card-stats { display:grid; grid-template-columns:1fr 1fr; gap:5px; font-size:12px; color:#ccc; background:#181818; padding:10px; border-radius:4px; }
.hire-btn { width:100%; padding:10px; background:#262; color:#bfb; border:1px solid #484; border-radius:4px; cursor:pointer; font-weight:bold; }
.hire-btn:hover { background:#383; }
.hire-btn:disabled { background:#333; color:#555; border-color:#444; cursor:not-allowed; }
.item-list-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr)); gap:15px; width:100%; }
.item-card { background:#222; border:1px solid #444; border-radius:6px; padding:10px; position:relative; }
.item-card.sold-out { opacity:0.5; filter:grayscale(100%); pointer-events:none; }
.item-card.sold-out::after { content:"SOLD OUT"; position:absolute; top:50%; left:50%; transform:translate(-50%, -50%) rotate(-15deg); color:#f44; font-weight:bold; font-size:24px; border:2px solid #f44; padding:5px 10px; text-shadow:2px 2px 0 black; }
.item-btn { margin-top:5px; padding:6px; border:1px solid #555; background:#333; color:#ddd; cursor:pointer; border-radius:4px; width:100%; }
.item-btn.buy { background:#252; border-color:#474; color:#bfb; }
.auto-btn {
    width: 100%;
    height: 35px;
    margin-bottom: 8px;
    background: #2a2a2a;
    color: #aaa;
    border: 1px solid #555;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    font-size: 11px;
    transition: 0.2s;
}
.auto-btn.active {
    background: #642; /* 활성화 시 붉은 톤 */
    border-color: gold;
    color: gold;
    box-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
}
/* 파티 리스트 내 레벨업 버튼 (아이콘 옆) */
.lv-up-inner-btn {
    background: gold;
    color: black;
    border: none;
    border-radius: 4px;
    padding: 2px 6px;
    font-size: 10px;
    font-weight: bold;
    cursor: pointer;
    margin-left: auto; /* 오른쪽 정렬의 핵심 */
    box-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
}

/* 사이드바 하단 자동 전투 버튼 영역 */
.sidebar-footer {
    padding: 10px;
    border-top: 1px solid #444;
    background: #111;
}

.auto-btn-sidebar {
    width: 100%;
    height: 38px;
    background: #2a2a2a;
    color: #888;
    border: 1px solid #555;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: 0.2s;
}

.auto-btn-sidebar.active {
    background: #432;
    border-color: gold;
    color: gold;
}

/* 스테이지 클리어 표시 스타일 */
.stage-btn.cleared {
    border-color: #262;
    background: #131;
}
.clear-badge {
    font-size: 10px;
    color: #4f4;
    font-weight: bold;
    margin-top: 5px;
}
/* 맨 마지막에 추가 */

/* 관리창 전체 레이아웃 (폭 넓힘) */
.manage-container {
    display: grid !important;
    grid-template-columns: 220px 360px 460px !important; /* 마지막 컬럼을 460px로 확장 */
    gap: 15px;
    height: 90vh;
    padding: 20px;
}

/* 인벤토리 그리드 최적화 (아이콘 꽉 차게) */
.mini-inven-grid {
    display: grid !important;
    grid-template-columns: repeat(5, 54px) !important; 
    grid-auto-rows: 54px;
    gap: 8px !important;
    padding: 12px !important;
    justify-content: center;
    background: #0a0a0a;
    border: 1px solid #333;
    border-radius: 6px;
}

.mini-item {
    width: 54px !important;
    height: 54px !important;
    background: #111 !important;
    border: 1px solid #444 !important;
    border-radius: 4px;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

.mini-item .item-icon {
    font-size: 34px !important; /* 아이콘 크기 키움 */
    line-height: 1;
}

.mini-item:hover {
    border-color: gold !important;
    background: #252525 !important;
}

/* 타이틀 폰트 적용 */
.col-header {
    font-family: 'Orbitron', sans-serif !important;
    background: linear-gradient(90deg, #333, #111) !important;
    color: gold !important;
    text-align: left;
    padding: 10px 15px !important;
}
.game-panel {
    background: var(--panel-bg);
    border: 1px solid #444;
    border-radius: 8px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.7);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

/* 모든 서브 메뉴 헤더 통일 */
.sub-header {
    font-family: var(--font-game);
    background: linear-gradient(90deg, #333, #111) !important;
    border-bottom: 2px solid #554 !important;
    color: var(--gold) !important;
    text-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
}

/* 나가기 버튼 통일 */
.close-btn {
    font-family: var(--font-game);
    background: #422 !important;
    border: 1px solid #633 !important;
    color: #f88 !important;
    text-transform: uppercase;
}
